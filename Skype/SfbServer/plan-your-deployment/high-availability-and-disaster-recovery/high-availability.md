---
title: Alta disponibilidad y administración del grupo de servidores front-end
ms.author: heidip
author: microsoftheidi
manager: serdars
ms.date: 12/20/2016
ms.audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 965041b7-3136-49f2-89c1-8b30417cb8ea
description: Learn about Front End pool management in Skype for Business Server, including managing pools, quorum loss, and special steps for pools with only two Front End Servers.
ms.openlocfilehash: f348fcc4fee6a48a41265da88fe432d9e4550b6c
ms.sourcegitcommit: 7d819bc9eb63bfd85f5dada09f1b8e5354c56f6b
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/28/2018
---
# <a name="front-end-pool-high-availability-and-management"></a><span data-ttu-id="1aed0-103">Alta disponibilidad y administración del grupo de servidores front-end</span><span class="sxs-lookup"><span data-stu-id="1aed0-103">Front End Pool high availability and management</span></span>
 
<span data-ttu-id="1aed0-104">Learn about Front End pool management in Skype for Business Server, including managing pools, quorum loss, and special steps for pools with only two Front End Servers.</span><span class="sxs-lookup"><span data-stu-id="1aed0-104">Learn about Front End pool management in Skype for Business Server, including managing pools, quorum loss, and special steps for pools with only two Front End Servers.</span></span>
  
<span data-ttu-id="1aed0-105">In Skype for Business Server, the architecture of Front End pools uses a distributed systems model, with each user's data kept on as many as three Front End servers in the pool.</span><span class="sxs-lookup"><span data-stu-id="1aed0-105">In Skype for Business Server, the architecture of Front End pools uses a distributed systems model, with each user's data kept on as many as three Front End servers in the pool.</span></span> <span data-ttu-id="1aed0-106">We recommend that all your Enterprise Edition Front End pools include at least three Front End Servers.</span><span class="sxs-lookup"><span data-stu-id="1aed0-106">We recommend that all your Enterprise Edition Front End pools include at least three Front End Servers.</span></span> 
  
## <a name="planning-for-the-management-of-front-end-pools"></a><span data-ttu-id="1aed0-107">Planear la administración de grupos de servidores front-end</span><span class="sxs-lookup"><span data-stu-id="1aed0-107">Planning for the management of Front End pools</span></span>

 <span data-ttu-id="1aed0-108">Skype for Business Server uses a distributed systems model based on Windows Fabric.</span><span class="sxs-lookup"><span data-stu-id="1aed0-108">Skype for Business Server uses a distributed systems model based on Windows Fabric.</span></span> <span data-ttu-id="1aed0-109">In this model, important data for each user and conference is stored on three Front End Servers in a Front End pool.</span><span class="sxs-lookup"><span data-stu-id="1aed0-109">In this model, important data for each user and conference is stored on three Front End Servers in a Front End pool.</span></span> <span data-ttu-id="1aed0-110">These three servers storing a certain set of data are calledreplicas.</span><span class="sxs-lookup"><span data-stu-id="1aed0-110">These three servers storing a certain set of data are calledreplicas.</span></span>
  
<span data-ttu-id="1aed0-111">With the distributed model for Front End pools, a certain numbers of a pool's servers must be running for the pool to function.</span><span class="sxs-lookup"><span data-stu-id="1aed0-111">With the distributed model for Front End pools, a certain numbers of a pool's servers must be running for the pool to function.</span></span> <span data-ttu-id="1aed0-112">There are two loss modes for a pool.</span><span class="sxs-lookup"><span data-stu-id="1aed0-112">There are two loss modes for a pool.</span></span>
  
- <span data-ttu-id="1aed0-113">Routing Group Level quorum loss, caused by not enough replica servers for a particular routing group.</span><span class="sxs-lookup"><span data-stu-id="1aed0-113">Routing Group Level quorum loss, caused by not enough replica servers for a particular routing group.</span></span> <span data-ttu-id="1aed0-114">Un grupo de enrutamiento es un conjunto de usuarios hospedados en el grupo.</span><span class="sxs-lookup"><span data-stu-id="1aed0-114">A routing group is a set of users homed in the pool.</span></span> <span data-ttu-id="1aed0-115">Cada grupo de enrutamiento tiene tres réplicas en el grupo: una principal y dos secundarias.</span><span class="sxs-lookup"><span data-stu-id="1aed0-115">Each routing group has three replicas in the pool: one primary replica and two secondary replicas.</span></span>
    
- <span data-ttu-id="1aed0-116">Pool Level quorum loss, caused when not enough seed servers are running in the pool.</span><span class="sxs-lookup"><span data-stu-id="1aed0-116">Pool Level quorum loss, caused when not enough seed servers are running in the pool.</span></span> 
    
### <a name="routing-group-level-quorum-loss"></a><span data-ttu-id="1aed0-117">Pérdida de cuórum en el grupo de enrutamiento</span><span class="sxs-lookup"><span data-stu-id="1aed0-117">Routing Group Level quorum loss</span></span>

<span data-ttu-id="1aed0-p105">La primera vez que inicia un nuevo grupo de servidores front-end, es fundamental que el 85 % de los servidores estén en funcionamiento, tal como se muestra en la tabla siguiente. Si hay menos servidores en ejecución, es posible que los servicios queden interrumpidos en el estado de inicio y que el grupo no se inicie.</span><span class="sxs-lookup"><span data-stu-id="1aed0-p105">The first time you start a new Front End pool, it is essential that 85% of the servers are up and running, as shown in the following table. If fewer servers are running, the services might be stuck in the starting state and the pool might not start.</span></span>
  
|<span data-ttu-id="1aed0-120">Cantidad total de servidores en el grupo</span><span class="sxs-lookup"><span data-stu-id="1aed0-120">Total number of servers in the pool</span></span>  <br/> |<span data-ttu-id="1aed0-121">Cantidad de servidores que necesitan estar en ejecución para que el grupo se inicie por primera vez</span><span class="sxs-lookup"><span data-stu-id="1aed0-121">Number of servers that must be running for the pool to be started the first time</span></span>  <br/> |
|:-----|:-----|
|<span data-ttu-id="1aed0-122">2</span><span class="sxs-lookup"><span data-stu-id="1aed0-122">2</span></span>  <br/> |<span data-ttu-id="1aed0-123">1</span><span class="sxs-lookup"><span data-stu-id="1aed0-123">1</span></span>  <br/> |
|<span data-ttu-id="1aed0-124">3</span><span class="sxs-lookup"><span data-stu-id="1aed0-124">3</span></span>  <br/> |<span data-ttu-id="1aed0-125">3</span><span class="sxs-lookup"><span data-stu-id="1aed0-125">3</span></span>  <br/> |
|<span data-ttu-id="1aed0-126">4</span><span class="sxs-lookup"><span data-stu-id="1aed0-126">4</span></span>  <br/> |<span data-ttu-id="1aed0-127">3</span><span class="sxs-lookup"><span data-stu-id="1aed0-127">3</span></span>  <br/> |
|<span data-ttu-id="1aed0-128">5</span><span class="sxs-lookup"><span data-stu-id="1aed0-128">5</span></span>  <br/> |<span data-ttu-id="1aed0-129">4</span><span class="sxs-lookup"><span data-stu-id="1aed0-129">4</span></span>  <br/> |
|<span data-ttu-id="1aed0-130">6</span><span class="sxs-lookup"><span data-stu-id="1aed0-130">6</span></span>  <br/> |<span data-ttu-id="1aed0-131">5</span><span class="sxs-lookup"><span data-stu-id="1aed0-131">5</span></span>  <br/> |
|<span data-ttu-id="1aed0-132">7</span><span class="sxs-lookup"><span data-stu-id="1aed0-132">7</span></span>  <br/> |<span data-ttu-id="1aed0-133">5</span><span class="sxs-lookup"><span data-stu-id="1aed0-133">5</span></span>  <br/> |
|<span data-ttu-id="1aed0-134">8</span><span class="sxs-lookup"><span data-stu-id="1aed0-134">8</span></span>  <br/> |<span data-ttu-id="1aed0-135">6</span><span class="sxs-lookup"><span data-stu-id="1aed0-135">6</span></span>  <br/> |
|<span data-ttu-id="1aed0-136">9</span><span class="sxs-lookup"><span data-stu-id="1aed0-136">9</span></span>  <br/> |<span data-ttu-id="1aed0-137">7</span><span class="sxs-lookup"><span data-stu-id="1aed0-137">7</span></span>  <br/> |
|<span data-ttu-id="1aed0-138">10</span><span class="sxs-lookup"><span data-stu-id="1aed0-138">10</span></span>  <br/> |<span data-ttu-id="1aed0-139">8</span><span class="sxs-lookup"><span data-stu-id="1aed0-139">8</span></span>  <br/> |
|<span data-ttu-id="1aed0-140">11</span><span class="sxs-lookup"><span data-stu-id="1aed0-140">11</span></span>  <br/> |<span data-ttu-id="1aed0-141">9</span><span class="sxs-lookup"><span data-stu-id="1aed0-141">9</span></span>  <br/> |
|<span data-ttu-id="1aed0-142">12</span><span class="sxs-lookup"><span data-stu-id="1aed0-142">12</span></span>  <br/> |<span data-ttu-id="1aed0-143">10</span><span class="sxs-lookup"><span data-stu-id="1aed0-143">10</span></span>  <br/> |
   
<span data-ttu-id="1aed0-144">Cada vez subsiguiente que se inicie el grupo, es preciso iniciar el 85 % de los servidores (tal como se muestra en la tabla anterior).</span><span class="sxs-lookup"><span data-stu-id="1aed0-144">Every subsequent time the pool is started, 85% of the servers should be started (as shown in the preceding table).</span></span> <span data-ttu-id="1aed0-145">If this number of servers cannot be started (but enough servers can be started so that you are not at pool-level quorum loss), you can use the  `Reset-CsPoolRegistrarState -ResetType QuorumLossRecovery` cmdlet to enable the pool to recover from this routing group level quorum loss and make progress.</span><span class="sxs-lookup"><span data-stu-id="1aed0-145">If this number of servers cannot be started (but enough servers can be started so that you are not at pool-level quorum loss), you can use the  `Reset-CsPoolRegistrarState -ResetType QuorumLossRecovery` cmdlet to enable the pool to recover from this routing group level quorum loss and make progress.</span></span> <span data-ttu-id="1aed0-146">For more information about how to use this cmdlet, see <link Reset-CsPoolRegistrarState>.</span><span class="sxs-lookup"><span data-stu-id="1aed0-146">For more information about how to use this cmdlet, see <link Reset-CsPoolRegistrarState>.</span></span>
  
> [!NOTE]
> <span data-ttu-id="1aed0-147">En los grupos de servidores con una cantidad par de servidores, Skype Empresarial Server usa la base de datos SQL principal como testigo.</span><span class="sxs-lookup"><span data-stu-id="1aed0-147">In pools with an even number of servers, Skype for Business Server uses the Primary SQL database as Witness.</span></span> <span data-ttu-id="1aed0-148">En un grupo como este, si apaga la base de datos principal, cambia a la copia reflejada y apaga una cantidad suficiente de servidores front-end para que no haya los suficientes en ejecución de acuerdo con la tabla anterior, todo el grupo de servidores quedará inactivo.</span><span class="sxs-lookup"><span data-stu-id="1aed0-148">In a pool like this, if you shut down the primary database and switch to the Mirror copy, and shut down enough Front End servers so that not enough are running according to the preceding table, the entire pool will go down.</span></span> <span data-ttu-id="1aed0-149">For more information, see [Database Mirroring Witness](https://go.microsoft.com/fwlink/?LinkId=393672).</span><span class="sxs-lookup"><span data-stu-id="1aed0-149">For more information, see [Database Mirroring Witness](https://go.microsoft.com/fwlink/?LinkId=393672).</span></span> 
  
#### <a name="pool-level-quorum-loss"></a><span data-ttu-id="1aed0-150">Pérdida de cuórum en el grupo de servidores</span><span class="sxs-lookup"><span data-stu-id="1aed0-150">Pool-level quorum loss</span></span>

<span data-ttu-id="1aed0-151">For a Front End pool to function at all, it cannot be in pool-level quorum loss.</span><span class="sxs-lookup"><span data-stu-id="1aed0-151">For a Front End pool to function at all, it cannot be in pool-level quorum loss.</span></span> <span data-ttu-id="1aed0-152">Si la cantidad de servidores en ejecución está por debajo del nivel de funcionamiento (tal como se muestra en la tabla siguiente), los servidores restantes del grupo detendrán todos los servicios de Skype Empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="1aed0-152">If the number of servers running falls below the functional level as shown in the following table, the remaining servers in the pool will stop all Skype for Business Server services.</span></span> <span data-ttu-id="1aed0-153">Note that the numbers in the following table assume that the Back End Servers in the pool are running.</span><span class="sxs-lookup"><span data-stu-id="1aed0-153">Note that the numbers in the following table assume that the Back End Servers in the pool are running.</span></span>
  
|<span data-ttu-id="1aed0-154">Total number of Front End Servers in the pool</span><span class="sxs-lookup"><span data-stu-id="1aed0-154">Total number of Front End Servers in the pool</span></span>  <br/> |<span data-ttu-id="1aed0-155">Cantidad de servidores que es preciso que estén en ejecución para que el grupo funcione</span><span class="sxs-lookup"><span data-stu-id="1aed0-155">Number of servers that must be running for pool to be functional</span></span>  <br/> |
|:-----|:-----|
|<span data-ttu-id="1aed0-156">2</span><span class="sxs-lookup"><span data-stu-id="1aed0-156">2</span></span>  <br/> |<span data-ttu-id="1aed0-157">1</span><span class="sxs-lookup"><span data-stu-id="1aed0-157">1</span></span>  <br/> |
|<span data-ttu-id="1aed0-158">3-4</span><span class="sxs-lookup"><span data-stu-id="1aed0-158">3-4</span></span>  <br/> |<span data-ttu-id="1aed0-159">2 cualesquiera</span><span class="sxs-lookup"><span data-stu-id="1aed0-159">Any 2</span></span>  <br/> |
|<span data-ttu-id="1aed0-160">5-6</span><span class="sxs-lookup"><span data-stu-id="1aed0-160">5-6</span></span>  <br/> |<span data-ttu-id="1aed0-161">3 cualesquiera</span><span class="sxs-lookup"><span data-stu-id="1aed0-161">Any 3</span></span>  <br/> |
|<span data-ttu-id="1aed0-162">7</span><span class="sxs-lookup"><span data-stu-id="1aed0-162">7</span></span>  <br/> |<span data-ttu-id="1aed0-163">4 cualesquiera</span><span class="sxs-lookup"><span data-stu-id="1aed0-163">Any 4</span></span>  <br/> |
|<span data-ttu-id="1aed0-164">8-9</span><span class="sxs-lookup"><span data-stu-id="1aed0-164">8-9</span></span>  <br/> |<span data-ttu-id="1aed0-165">4 cualesquiera de los primeros 7 servidores</span><span class="sxs-lookup"><span data-stu-id="1aed0-165">Any 4 of the first 7 servers</span></span>  <br/> |
|<span data-ttu-id="1aed0-166">10-12</span><span class="sxs-lookup"><span data-stu-id="1aed0-166">10-12</span></span>  <br/> |<span data-ttu-id="1aed0-167">5 cualesquiera de los primeros 9 servidores</span><span class="sxs-lookup"><span data-stu-id="1aed0-167">Any 5 of the first 9 servers</span></span>  <br/> |
   
<span data-ttu-id="1aed0-168">In the preceding table, the "first servers" are the servers which were brought up first, chronologically, when the pool was started for the first time.</span><span class="sxs-lookup"><span data-stu-id="1aed0-168">In the preceding table, the "first servers" are the servers which were brought up first, chronologically, when the pool was started for the first time.</span></span> <span data-ttu-id="1aed0-169">To determine these servers, you can use the  `Get-CsComputer` cmdlet with the ` -PoolFqdn` option.</span><span class="sxs-lookup"><span data-stu-id="1aed0-169">To determine these servers, you can use the  `Get-CsComputer` cmdlet with the ` -PoolFqdn` option.</span></span> <span data-ttu-id="1aed0-170">Este cmdlet le mostrará los servidores en el orden en el que aparecen en la topología; los que se encuentran en la parte superior de la lista son los primeros servidores.</span><span class="sxs-lookup"><span data-stu-id="1aed0-170">This cmdlet will show the servers in the order that they appear in the topology, and the ones at the top of the list are the first servers.</span></span>
  
#### <a name="additional-steps-to-ensure-pools-are-functional"></a><span data-ttu-id="1aed0-171">Pasos adicionales para comprobar si los grupos de servidores son funcionales</span><span class="sxs-lookup"><span data-stu-id="1aed0-171">Additional steps to ensure pools are functional</span></span>

<span data-ttu-id="1aed0-172">Es necesario tener en cuenta algunos otros factores a fin de asegurarse de que los grupos de servidores front-end sigan siendo funcionales.</span><span class="sxs-lookup"><span data-stu-id="1aed0-172">You should watch for a couple of other factors to ensure that your Front End pools remain functional.</span></span>
  
- <span data-ttu-id="1aed0-173">When you move users to the pool for the first time, be sure at least three of the Front End Servers are running.</span><span class="sxs-lookup"><span data-stu-id="1aed0-173">When you move users to the pool for the first time, be sure at least three of the Front End Servers are running.</span></span>
    
- <span data-ttu-id="1aed0-174">Si establece una relación de emparejamiento entre este grupo de servidores y otro con fines de recuperación ante desastres, después de establecer dicha relación, necesitará asegurarse de que este grupo tiene tres servidores front-end ejecutándose simultáneamente en algún momento para sincronizar correctamente los datos con el servidor de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="1aed0-174">If you establish a pairing relationship between this pool and another pool for disaster recovery purposes, then after establishing that relationship you must be sure this pool has three Front End servers running simultaneously at some time to properly synchronize data with the backup pool.</span></span> <span data-ttu-id="1aed0-175">For more information on pool pairing and disaster recovery features, see [Plan for high availability and disaster recovery in Skype for Business Server 2015](high-availability-and-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="1aed0-175">For more information on pool pairing and disaster recovery features, see [Plan for high availability and disaster recovery in Skype for Business Server 2015](high-availability-and-disaster-recovery.md).</span></span> 
    
## <a name="front-end-pool-with-two-front-end-servers"></a><span data-ttu-id="1aed0-176">Grupos de servidores front-end con dos servidores front-end</span><span class="sxs-lookup"><span data-stu-id="1aed0-176">Front End pool with two Front End servers</span></span>

<span data-ttu-id="1aed0-177">We do not recommend deploying a Front End pool that contains only two Front End Servers.</span><span class="sxs-lookup"><span data-stu-id="1aed0-177">We do not recommend deploying a Front End pool that contains only two Front End Servers.</span></span> <span data-ttu-id="1aed0-178">Este grupo pequeño no ofrecerá una solución de alta disponibilidad sólida como lo haría un grupo más grande y requerirá más atención en su administración.</span><span class="sxs-lookup"><span data-stu-id="1aed0-178">This small pool will not provide a robust high-availability solution like a larger pool would, and needs extra care in managing.</span></span> <span data-ttu-id="1aed0-179">Additionally, if the Back End Server of a two-server pool went down, the whole pool itself would likely soon go down as well.</span><span class="sxs-lookup"><span data-stu-id="1aed0-179">Additionally, if the Back End Server of a two-server pool went down, the whole pool itself would likely soon go down as well.</span></span> <span data-ttu-id="1aed0-180">If you want to deploy just one or two servers running Skype for Business Server, we recommend you deploy them as Standard Edition servers.</span><span class="sxs-lookup"><span data-stu-id="1aed0-180">If you want to deploy just one or two servers running Skype for Business Server, we recommend you deploy them as Standard Edition servers.</span></span>
  
<span data-ttu-id="1aed0-181">If you do ever need to deploy a pool with two Front End Servers, follow these guidelines:</span><span class="sxs-lookup"><span data-stu-id="1aed0-181">If you do ever need to deploy a pool with two Front End Servers, follow these guidelines:</span></span>
  
- <span data-ttu-id="1aed0-182">If one of the two Front End Servers goes down, you should try to bring the failed server back up as soon as you can.</span><span class="sxs-lookup"><span data-stu-id="1aed0-182">If one of the two Front End Servers goes down, you should try to bring the failed server back up as soon as you can.</span></span> <span data-ttu-id="1aed0-183">Del mismo modo, si necesita actualizar uno de los dos servidores, vuelva a ponerlo en línea tan pronto como termine la actualización.</span><span class="sxs-lookup"><span data-stu-id="1aed0-183">Similarly, if you need to upgrade one of the two servers, bring it back online as soon as the upgrade is finished.</span></span>
    
- <span data-ttu-id="1aed0-184">Si, por algún motivo, necesita detener los dos servidores en algún momento, realice lo siguiente cuando termine el tiempo de inactividad del grupo:</span><span class="sxs-lookup"><span data-stu-id="1aed0-184">If for some reason you need to bring both servers down at the same time, do the following when the downtime for the pool is finished:</span></span>
    
  - <span data-ttu-id="1aed0-185">The best practice is to restart both Front End Servers at the same time.</span><span class="sxs-lookup"><span data-stu-id="1aed0-185">The best practice is to restart both Front End Servers at the same time.</span></span> 
    
  - <span data-ttu-id="1aed0-186">Si no se pueden reiniciar los dos servidores al mismo tiempo, será necesario ponerlos en funcionamiento nuevamente en el orden inverso al orden en que se detuvieron.</span><span class="sxs-lookup"><span data-stu-id="1aed0-186">If the two servers cannot be restarted at the same time, you should bring them back up in the reverse order of the order they went down.</span></span>
    
  - <span data-ttu-id="1aed0-187">If you cannot bring them back up in that order, then use the following cmdlet before bringing the pool back up:  `Reset-CsPoolRegistrarState -ResetType QuorumLossRecovery -PoolFQDN <FQDN>`</span><span class="sxs-lookup"><span data-stu-id="1aed0-187">If you cannot bring them back up in that order, then use the following cmdlet before bringing the pool back up:  `Reset-CsPoolRegistrarState -ResetType QuorumLossRecovery -PoolFQDN <FQDN>`</span></span>
    
## <a name="front-end-pool-configuration-failures-and-changes"></a><span data-ttu-id="1aed0-188">Cambios y errores de configuración en el grupo de servidores front-end</span><span class="sxs-lookup"><span data-stu-id="1aed0-188">Front End pool configuration failures and changes</span></span>

<span data-ttu-id="1aed0-p113">Si se produce un error en un servidor front-end y no es probable que se sustituya durante unos días, quite el servidor de la topología. Cuando el nuevo servidor front-end esté disponible, agréguelo a la topología.</span><span class="sxs-lookup"><span data-stu-id="1aed0-p113">If a Front End server fails and is unlikely to be replaced for a few days or more, remove the server from the topology. Add the new Front End server to the topology when it is available again.</span></span>
  
<span data-ttu-id="1aed0-191">Siempre que realice un cambio de configuración en un grupo de servidores front-end, como agregar o quitar servidores, es preciso seguir estas instrucciones:</span><span class="sxs-lookup"><span data-stu-id="1aed0-191">Whenever you make a configuration change to a Front End pool, such as adding or removing servers, you must follow these guidelines:</span></span>
  
- <span data-ttu-id="1aed0-p114">Después de publicar una topología nueva, necesita reiniciar cada uno de los servidores front-end del grupo. Reinícielos de uno en uno.</span><span class="sxs-lookup"><span data-stu-id="1aed0-p114">After the new topology has been published, you must restart each Front End server in the pool. Restart them one at a time.</span></span>
    
- <span data-ttu-id="1aed0-194">If the entire pool has been down during the configuration change, then run the following cmdlet after the new topology is published:  `Reset-CsPoolRegistrarState -PoolFQDN <PoolFQDN> -ResetType ServiceReset`</span><span class="sxs-lookup"><span data-stu-id="1aed0-194">If the entire pool has been down during the configuration change, then run the following cmdlet after the new topology is published:  `Reset-CsPoolRegistrarState -PoolFQDN <PoolFQDN> -ResetType ServiceReset`</span></span>
    

