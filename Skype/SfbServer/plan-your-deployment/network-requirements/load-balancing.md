---
title: Requisitos de equilibrio de carga para Skype Empresarial
ms.reviewer: ''
ms.author: v-cichur
author: cichur
manager: serdars
audience: ITPro
ms.topic: conceptual
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection:
- IT_Skype16
- Strat_SB_Admin
ms.custom: ''
ms.assetid: 84489328-64a4-486c-9384-a3e5c8ed9c8b
description: 'Resumen: revise las consideraciones de equilibrio de carga antes de implementar Skype Empresarial Server.'
ms.openlocfilehash: 5790ef1ba0d32774ced45be5af257f70fc4cf594
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/12/2021
ms.locfileid: "49834380"
---
# <a name="load-balancing-requirements-for-skype-for-business"></a><span data-ttu-id="1515f-103">Requisitos de equilibrio de carga para Skype Empresarial</span><span class="sxs-lookup"><span data-stu-id="1515f-103">Load balancing requirements for Skype for Business</span></span>
 
<span data-ttu-id="1515f-104">**Resumen:** Revise las consideraciones de equilibrio de carga antes de implementar Skype Empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="1515f-104">**Summary:** Review the load balancing considerations before implementing Skype for Business Server.</span></span>
  
<span data-ttu-id="1515f-105">El equilibrio de carga distribuye el tráfico entre los servidores de un grupo.</span><span class="sxs-lookup"><span data-stu-id="1515f-105">Load balancing distributes traffic among the servers in a pool.</span></span> <span data-ttu-id="1515f-106">Si tiene grupos de servidores front-end, grupos de servidores de mediación o grupos de servidores perimetrales, debe implementar el equilibrio de carga para estos grupos.</span><span class="sxs-lookup"><span data-stu-id="1515f-106">If you have Front End pools, Mediation Server pools, or Edge Server pools, you need to deploy load balancing for these pools.</span></span>
  
<span data-ttu-id="1515f-107">Skype Empresarial Server admite dos tipos de soluciones de equilibrio de carga para el tráfico de cliente a servidor: equilibrio de carga del Sistema de nombres de dominio (DNS) y equilibrio de carga de hardware (a menudo abreviado como HLB).</span><span class="sxs-lookup"><span data-stu-id="1515f-107">Skype for Business Server supports two types of load balancing solutions for client-to-server traffic: Domain Name System (DNS) load balancing and hardware load balancing (often abbreviated as HLB).</span></span> <span data-ttu-id="1515f-108">El equilibrio de carga de DNS ofrece varias ventajas, como una administración más sencilla, una solución de problemas más eficaz y la capacidad de aislar gran parte del tráfico de Skype Empresarial Server de cualquier posible problema del equilibrador de carga de hardware.</span><span class="sxs-lookup"><span data-stu-id="1515f-108">DNS load balancing offers several advantages including simpler administration, more efficient troubleshooting, and the ability to isolate much of your Skype for Business Server traffic from any potential hardware load balancer problems.</span></span>
  
<span data-ttu-id="1515f-109">Decida usted mismo qué solución de equilibrio de carga es adecuada para cada grupo de servidores de la implementación, pero tenga en cuenta las siguientes restricciones:</span><span class="sxs-lookup"><span data-stu-id="1515f-109">Decide for yourself which load balancing solution is appropriate for each pool in your deployment, but keep in mind the following restrictions:</span></span> 
  
- <span data-ttu-id="1515f-p103">La interfaz perimetral interna y la interfaz perimetral externa deben usar el mismo tipo de equilibrio de carga. No puede usar el equilibrio de carga de DNS en una interfaz y el equilibrio de carga de hardware en la otra.</span><span class="sxs-lookup"><span data-stu-id="1515f-p103">The internal Edge interface and external Edge interface must use the same type of load balancing. You cannot use DNS load balancing on one interface and hardware load balancing on the other.</span></span>
    
- <span data-ttu-id="1515f-p104">Algunos tipos de tráfico requieren un equilibrador de carga de hardware. Por ejemplo, el tráfico HTTP requiere un equilibrador de carga de hardware en lugar del equilibrio de carga de DNS. El  equilibrio de carga de DNS no trabaja con tráfico web de cliente a servidor.</span><span class="sxs-lookup"><span data-stu-id="1515f-p104">Some types of traffic require a hardware load balancer. For example, HTTP traffic requires a hardware load balancer instead of DNS load balancing. DNS load balancing does not work with client-to-server web traffic.</span></span>
    
<span data-ttu-id="1515f-115">Si decide usar el equilibrio de carga DNS para un grupo pero aún tiene que implementar equilibradores de carga de hardware para tráfico como el tráfico HTTP, la administración de los equilibradores de carga de hardware será mucho más sencilla.</span><span class="sxs-lookup"><span data-stu-id="1515f-115">If you choose to use DNS load balancing for a pool but still need to implement hardware load balancers for traffic such as HTTP traffic, the administration of the hardware load balancers is greatly simplified.</span></span> <span data-ttu-id="1515f-116">Por ejemplo, la configuración del equilibrador de carga de hardware será más sencilla, ya que solo administrará el tráfico HTTP y HTTPS, mientras que el equilibrio de carga de DNS administrará todos los demás protocolos.</span><span class="sxs-lookup"><span data-stu-id="1515f-116">For example, configuring the hardware load balancer will be simpler as it will only manage the HTTP and HTTPS traffic, while all other protocols will be managed by DNS load balancing.</span></span> <span data-ttu-id="1515f-117">Para obtener información detallada, consulte [DNS Load Balancing](load-balancing.md#BKMK_DNSLoadBalancing).</span><span class="sxs-lookup"><span data-stu-id="1515f-117">For details, see [DNS Load Balancing](load-balancing.md#BKMK_DNSLoadBalancing).</span></span> 
  
<span data-ttu-id="1515f-118">Para el tráfico de servidor a servidor, Skype Empresarial Server usa el equilibrio de carga para topologías.</span><span class="sxs-lookup"><span data-stu-id="1515f-118">For server-to-server traffic, Skype for Business Server uses topology-aware load balancing.</span></span> <span data-ttu-id="1515f-119">Los servidores leen la topología publicada en el almacén de administración central para obtener los FQDN de los servidores de la topología y distribuir automáticamente el tráfico entre los servidores.</span><span class="sxs-lookup"><span data-stu-id="1515f-119">Servers read the published topology in the Central Management store to obtain the FQDNs of servers in the topology, and automatically distribute the traffic among the servers.</span></span> <span data-ttu-id="1515f-120">Los administradores no necesitan configurar ni administrar este tipo de equilibrio de carga.</span><span class="sxs-lookup"><span data-stu-id="1515f-120">Administrators do not need to set up or manage this type of load balancing.</span></span> 
  
<span data-ttu-id="1515f-121">Si usa el equilibrio de carga de DNS y necesita bloquear el tráfico a un equipo específico, no es suficiente simplemente quitar las entradas de dirección IP del FQDN del grupo de servidores.</span><span class="sxs-lookup"><span data-stu-id="1515f-121">If you use DNS load balancing and you need to block traffic to a specific computer, it is not sufficient to just remove the IP address entries from the Pool FQDN.</span></span> <span data-ttu-id="1515f-122">También debe quitar la entrada DNS del equipo.</span><span class="sxs-lookup"><span data-stu-id="1515f-122">You must remove the DNS entry for the computer as well.</span></span> 
  
## <a name="hardware-load-balancer-requirements"></a><span data-ttu-id="1515f-123">Requisitos del equilibrador de carga de hardware</span><span class="sxs-lookup"><span data-stu-id="1515f-123">Hardware load balancer requirements</span></span>

<span data-ttu-id="1515f-124">La topología perimetral consolidada a escala de Skype Empresarial Server está optimizada para el equilibrio de carga dns para nuevas implementaciones federadas principalmente con otras organizaciones que usan Skype Empresarial Server o Lync Server.</span><span class="sxs-lookup"><span data-stu-id="1515f-124">The Skype for Business Server scaled consolidated Edge topology is optimized for DNS load balancing for new deployments federating primarily with other organizations using Skype for Business Server or Lync Server.</span></span> <span data-ttu-id="1515f-125">En caso de que se necesite una gran disponibilidad en cualquiera de los siguientes escenarios, se deberá usar un equilibrador de carga de hardware en grupos de servidores perimetrales:</span><span class="sxs-lookup"><span data-stu-id="1515f-125">If high availability is required for any of the following scenarios, a hardware load balancer must be used on Edge Server pools for the following:</span></span> 
  
- <span data-ttu-id="1515f-126">Federación con organizaciones que usan Office Communications Server 2007 R2 u Office Communications Server 2007</span><span class="sxs-lookup"><span data-stu-id="1515f-126">Federation with organizations using Office Communications Server 2007 R2 or Office Communications Server 2007</span></span>
    
- <span data-ttu-id="1515f-127">Mensajería unificada de Exchange para usuarios remotos que usan mensajería unificada de Exchange antes de Exchange 2010 con SP1</span><span class="sxs-lookup"><span data-stu-id="1515f-127">Exchange UM for remote users using Exchange UM prior to Exchange 2010 with SP1</span></span>
    
- <span data-ttu-id="1515f-128">Conectividad con usuarios de mensajería instantánea pública</span><span class="sxs-lookup"><span data-stu-id="1515f-128">Connectivity to public IM users</span></span>
    
> [!IMPORTANT]
> <span data-ttu-id="1515f-p109">No se admite el uso del equilibrio de carga de DNS en una interfaz y del equilibrio de carga de hardware en otra. Debe utilizar el equilibrio de carga de hardware o de DNS en ambas interfaces.</span><span class="sxs-lookup"><span data-stu-id="1515f-p109">Using DNS load balancing on one interface and hardware load balancing on the other is not supported. You must use hardware load balancing for both interfaces or DNS load balancing for both.</span></span> 
  
> [!NOTE]
> <span data-ttu-id="1515f-p110">Si usa un equilibrador de carga de hardware, el equilibrador de carga que se haya implementado para las conexiones con la red interna deberá configurarse de modo que solo equilibre la carga del tráfico de los servidores que ejecuten el servicio perimetral de acceso y el servicio perimetral A/V. No puede equilibrar la carga del tráfico al servicio perimetral de conferencia web interno o al servicio proxy XMPP interno.</span><span class="sxs-lookup"><span data-stu-id="1515f-p110">If you are using a hardware load balancer, the load balancer deployed for connections with the internal network must be configured to load balance only the traffic to servers running the Access Edge service and the A/V Edge service. It cannot load balance the traffic to the internal Web Conferencing Edge service or the internal XMPP Proxy service.</span></span> 
  
> [!NOTE]
> <span data-ttu-id="1515f-133">La NAT de devolución directa de servidor (DSR) no es compatible con Skype Empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="1515f-133">The direct server return (DSR) NAT is not supported with Skype for Business Server.</span></span> 
  
<span data-ttu-id="1515f-134">Para determinar si el equilibrador de carga de hardware admite las características necesarias que necesita Skype Empresarial Server, consulte [Infraestructura para Skype Empresarial.](https://docs.microsoft.com/SkypeForBusiness/certification/infra-gateways)</span><span class="sxs-lookup"><span data-stu-id="1515f-134">To determine whether your hardware load balancer supports the necessary features required by Skype for Business Server, see [Infrastructure for Skype for Business](https://docs.microsoft.com/SkypeForBusiness/certification/infra-gateways).</span></span> 
  
### <a name="hardware-load-balancer-requirements-for-edge-servers-running-the-av-edge-service"></a><span data-ttu-id="1515f-135">Requisitos de equilibrador de carga de hardware para servidores perimetrales que ejecutan el servicio perimetral A/V</span><span class="sxs-lookup"><span data-stu-id="1515f-135">Hardware Load Balancer Requirements for Edge Servers Running the A/V Edge Service</span></span>

<span data-ttu-id="1515f-136">Estos son los requisitos del equilibrador de carga de hardware para los servidores perimetrales que ejecutan el servicio perimetral A/V:</span><span class="sxs-lookup"><span data-stu-id="1515f-136">Following are the hardware load balancer requirements for Edge Servers running the A/V Edge service:</span></span>
  
- <span data-ttu-id="1515f-p111">Inhabilitar la aplicación del algoritmo de Nagle TCP para los puertos 443 internos y externos. La aplicación del algoritmo de Nagle es la combinación de varios paquetes pequeños en un único paquete más grande para obtener una transmisión más eficiente.</span><span class="sxs-lookup"><span data-stu-id="1515f-p111">Turn off TCP nagling for both internal and external ports 443. Nagling is the process of combining several small packets into a single, larger packet for more efficient transmission.</span></span>
    
- <span data-ttu-id="1515f-139">Desactive el algoritmo de naje TCP para el intervalo de puertos externos de 50.000 a 59.999.</span><span class="sxs-lookup"><span data-stu-id="1515f-139">Turn off TCP nagling for external port range 50,000 - 59,999.</span></span> 
    
- <span data-ttu-id="1515f-140">No usar NAT en el firewall interno o externo.</span><span class="sxs-lookup"><span data-stu-id="1515f-140">Do not use NAT on the internal or external firewall.</span></span> 
    
- <span data-ttu-id="1515f-141">La interfaz interna del servidor perimetral y la interfaz externa del servidor perimetral deben estar en redes diferentes, y debe inhabilitarse el enrutamiento entre ellas.</span><span class="sxs-lookup"><span data-stu-id="1515f-141">The edge internal interface must be on a different network than the Edge Server external interface and routing between them must be disabled.</span></span> 
    
- <span data-ttu-id="1515f-142">La interfaz externa del servidor perimetral que ejecuta el servicio perimetral A/V debe usar direcciones IP enrutables públicamente y ninguna NAT o traducción de puertos en ninguna de las direcciones IP externas perimetrales.</span><span class="sxs-lookup"><span data-stu-id="1515f-142">The external interface of the Edge Server running the A/V Edge Service must use publicly routable IP addresses and no NAT or port translation on any of the edge external IP addresses.</span></span> 
    
- <span data-ttu-id="1515f-143">El equilibrador de carga no debe cambiar la dirección de origen del cliente.</span><span class="sxs-lookup"><span data-stu-id="1515f-143">The load balancer must not change the source address of the client.</span></span>
    
### <a name="other-hardware-load-balancer-requirements"></a><span data-ttu-id="1515f-144">Otros requisitos del equilibrador de carga de hardware</span><span class="sxs-lookup"><span data-stu-id="1515f-144">Other Hardware Load Balancer requirements</span></span>

<span data-ttu-id="1515f-145">Los requisitos de afinidad basados en cookies se reducen considerablemente en Skype Empresarial Server para servicios web.</span><span class="sxs-lookup"><span data-stu-id="1515f-145">Cookie-based affinity requirements are greatly reduced in Skype for Business Server for Web services.</span></span> <span data-ttu-id="1515f-146">Si va a implementar Skype Empresarial Server y no conservará ningún servidor front-end de Lync Server 2010 ni grupos de servidores front-end, no necesita persistencia basada en cookies.</span><span class="sxs-lookup"><span data-stu-id="1515f-146">If you are deploying Skype for Business Server and will not retain any Lync Server 2010 Front End Servers or Front End pools, you do not need cookie-based persistence.</span></span> <span data-ttu-id="1515f-147">Sin embargo, si conservará temporal o permanentemente los servidores front-end de Lync Server 2010 o grupos de servidores front-end, seguirá utilizando la persistencia basada en cookies mientras se implementa y configura para Lync Server 2010.</span><span class="sxs-lookup"><span data-stu-id="1515f-147">However, if you will temporarily or permanently retain any Lync Server 2010 Front End Servers or Front End pools, you still use cookie-based persistence as it is deployed and configured for Lync Server 2010.</span></span> 
  
> [!NOTE]
> <span data-ttu-id="1515f-148">**La utilización de la afinidad basada en cookies pese a que su implementación no la necesite** no tiene repercusiones.</span><span class="sxs-lookup"><span data-stu-id="1515f-148">**If you decide to use cookie-based affinity even though your deployment does not require it**, there is no negative impact to doing so.</span></span> 
  
<span data-ttu-id="1515f-149">Para las implementaciones que **no utilicen** la afinidad basada en cookies:</span><span class="sxs-lookup"><span data-stu-id="1515f-149">For deployments that **will not use** cookie-based affinity:</span></span>
  
- <span data-ttu-id="1515f-p113">En la regla de publicación del proxy inverso para el puerto 4443, establezca **Transferir encabezado de host** en True. Esto garantizará que se transfiera la URL original.</span><span class="sxs-lookup"><span data-stu-id="1515f-p113">On the reverse proxy publishing rule for port 4443, set **Forward host header** to True. This will ensure that the original URL is forwarded.</span></span>
    
<span data-ttu-id="1515f-152">Para las implementaciones que **utilicen** la afinidad basada en cookies:</span><span class="sxs-lookup"><span data-stu-id="1515f-152">For deployments that **will use** cookie-based affinity:</span></span>
  
- <span data-ttu-id="1515f-p114">En la regla de publicación del proxy inverso para el puerto 4443, establezca **Transferir encabezado de host** en True. Esto garantizará que se transfiera la URL original.</span><span class="sxs-lookup"><span data-stu-id="1515f-p114">On the reverse proxy publishing rule for port 4443, set **Forward host header** to True. This will ensure that the original URL is forwarded.</span></span>
    
- <span data-ttu-id="1515f-155">La cookie de equilibrio de carga de hardware NO DEBE estar marcada como httpOnly</span><span class="sxs-lookup"><span data-stu-id="1515f-155">Hardware load balancer cookie MUST NOT be marked httpOnly</span></span>
    
- <span data-ttu-id="1515f-156">La cookie de equilibrio de carga de hardware NO DEBE tener tiempo de expiración</span><span class="sxs-lookup"><span data-stu-id="1515f-156">Hardware load balancer cookie MUST NOT have an expiration time</span></span>
    
- <span data-ttu-id="1515f-157">La cookie de equilibrio de carga de hardware DEBE tener el nombre **MS-WSMAN** (este es el esperado por los servicios web y no puede modificarse)</span><span class="sxs-lookup"><span data-stu-id="1515f-157">Hardware load balancer cookie MUST be named **MS-WSMAN** (This is the value that the Web services expect, and cannot be changed)</span></span>
    
- <span data-ttu-id="1515f-p115">La cookie de equilibrio de carga de hardware DEBE estar establecida en cada respuesta HTTP para la que la solicitud HTTP entrante no tenía una cookie, independientemente de si una respuesta HTTP anterior en la misma conexión TCP ya había obtenido una cookie. Si el equilibrador de carga optimiza la inserción de cookies para que solo ocurra una vez por conexión TCP, la optimización NO debe usarse.</span><span class="sxs-lookup"><span data-stu-id="1515f-p115">Hardware load balancer cookie MUST be set in every HTTP response for which the incoming HTTP request did not have a cookie, regardless of whether a previous HTTP response on that same TCP connection had already obtained a cookie. If the load balancer optimizes cookie insert to only occur once per TCP connection, that optimization MUST NOT be used</span></span>
    
> [!NOTE]
> <span data-ttu-id="1515f-160">Las configuraciones típicas del equilibrador de carga de hardware usan afinidad de dirección de origen y una duración de sesión TCP de 20 minutos, lo que es adecuado para clientes de Lync Server y Lync 2013 porque el estado de sesión se mantiene a través del uso del cliente y/o de la interacción de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="1515f-160">Typical hardware load balancer configurations use source-address affinity and a 20 min. TCP session lifetime, which is fine for Lync Server and Lync 2013 clients because session state is maintained through client usage and/or and application interaction.</span></span> 
  
<span data-ttu-id="1515f-161">Si se implementan dispositivos móviles, el equilibrador de carga de hardware debe poder equilibrar la carga de una solicitud individual dentro de una sesión TCP (de hecho, debe poder equilibrar la carga de una solicitud individual basada en la dirección IP de destino).</span><span class="sxs-lookup"><span data-stu-id="1515f-161">If you are deploying mobile devices, your hardware load balancer must be able to load balance individual request within a TCP session (in effect, you must be able to load balance an individual request based on the target IP address).</span></span>
  
> [!CAUTION]
> <span data-ttu-id="1515f-162">Si va a implementar dispositivos móviles, el equilibrador de carga de hardware debe ser capaz de equilibrar individualmente la carga de cada solicitud dentro de una conexión TCP.</span><span class="sxs-lookup"><span data-stu-id="1515f-162">If you are deploying mobile devices, your hardware load balancer must be able to individually load balance each request within a TCP connection.</span></span> <span data-ttu-id="1515f-163">Las últimas aplicaciones móviles que utilizan el sistema Apple iOS requieren el uso seguridad de capa de transporte (TLS), versión 1.2.</span><span class="sxs-lookup"><span data-stu-id="1515f-163">The latest Apple iOS mobile apps require Transport Layer Security (TLS) version 1.2.</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="1515f-164">Para obtener más información sobre equilibradores de carga de hardware de terceros, consulte [Infraestructura para Skype Empresarial.](https://docs.microsoft.com/SkypeForBusiness/certification/infra-gateways)</span><span class="sxs-lookup"><span data-stu-id="1515f-164">For details on third party hardware load balancers, see [Infrastructure for Skype for Business](https://docs.microsoft.com/SkypeForBusiness/certification/infra-gateways).</span></span>  
  
<span data-ttu-id="1515f-165">A continuación se muestran los requisitos del equilibrador de carga de hardware para servicios web de grupo de directores y de servidores front-end:</span><span class="sxs-lookup"><span data-stu-id="1515f-165">Following are the hardware load balancer requirements for Director and Front End pool Web Services:</span></span>
  
- <span data-ttu-id="1515f-166">Para VIPS de servicios web internos, configure la persistencia Source_addr (puerto interno 80, 443) en el equilibrador de carga de hardware.</span><span class="sxs-lookup"><span data-stu-id="1515f-166">For internal Web Services VIPs, set Source_addr persistence (internal port 80, 443) on the hardware load balancer.</span></span> <span data-ttu-id="1515f-167">Para Skype Empresarial Server, Source_addr persistencia significa que se envían siempre varias conexiones procedentes de una única dirección IP a un servidor para mantener el estado de sesión.</span><span class="sxs-lookup"><span data-stu-id="1515f-167">For Skype for Business Server, Source_addr persistence means that multiple connections coming from a single IP address are always sent to one server to maintain session state.</span></span>
    
- <span data-ttu-id="1515f-168">Use un tiempo de espera de inactividad TCP de 1.800 segundos.</span><span class="sxs-lookup"><span data-stu-id="1515f-168">Use TCP idle timeout of 1800 seconds.</span></span>
    
- <span data-ttu-id="1515f-169">En el firewall entre el proxy inverso y el equilibrador de carga de hardware del grupo de servidores del próximo salto, cree una regla para permitir el tráfico https: en el puerto 4443, desde el proxy inverso al equilibrador de carga de hardware.</span><span class="sxs-lookup"><span data-stu-id="1515f-169">On the firewall between the reverse proxy and the next hop pool's hardware load balancer, create a rule to allow https: traffic on port 4443, from the reverse proxy to the hardware load balancer.</span></span> <span data-ttu-id="1515f-170">El equilibrador de carga de hardware debe configurarse de modo que escuche los puertos 80, 443 y 4443.</span><span class="sxs-lookup"><span data-stu-id="1515f-170">The hardware load balancer must be configured to listen on ports 80, 443, and 4443.</span></span>
    
### <a name="summary-of-hardware-load-balancer-affinity-requirements"></a><span data-ttu-id="1515f-171">Resumen de requisitos de afinidad del equilibrador de carga de hardware</span><span class="sxs-lookup"><span data-stu-id="1515f-171">Summary of Hardware Load Balancer Affinity Requirements</span></span>

|<span data-ttu-id="1515f-172">**Ubicación de cliente/usuario**</span><span class="sxs-lookup"><span data-stu-id="1515f-172">**Client/user location**</span></span>|<span data-ttu-id="1515f-173">**Requisitos de afinidad del FQDN de servicios web externos**</span><span class="sxs-lookup"><span data-stu-id="1515f-173">**External web services FQDN affinity requirements**</span></span>|<span data-ttu-id="1515f-174">**Requisitos de afinidad del FQDN de servicios web internos**</span><span class="sxs-lookup"><span data-stu-id="1515f-174">**Internal web services FQDN affinity requirements**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="1515f-175">Lync Web App (usuarios internos y externos)</span><span class="sxs-lookup"><span data-stu-id="1515f-175">Lync Web App (internal and external users)</span></span>  <br/> <span data-ttu-id="1515f-176">Dispositivo móvil (usuarios internos y externos)</span><span class="sxs-lookup"><span data-stu-id="1515f-176">Mobile device (internal and external users)</span></span>  <br/> |<span data-ttu-id="1515f-177">Sin afinidad</span><span class="sxs-lookup"><span data-stu-id="1515f-177">No affinity</span></span>  <br/> |<span data-ttu-id="1515f-178">Afinidad de direcciones de origen</span><span class="sxs-lookup"><span data-stu-id="1515f-178">Source address affinity</span></span>  <br/> |
|<span data-ttu-id="1515f-179">Lync Web App (solo usuarios externos)</span><span class="sxs-lookup"><span data-stu-id="1515f-179">Lync Web App (external users only)</span></span>  <br/> <span data-ttu-id="1515f-180">Dispositivo móvil (usuarios internos y externos)</span><span class="sxs-lookup"><span data-stu-id="1515f-180">Mobile device (internal and external users)</span></span>  <br/> |<span data-ttu-id="1515f-181">Sin afinidad</span><span class="sxs-lookup"><span data-stu-id="1515f-181">No affinity</span></span>  <br/> |<span data-ttu-id="1515f-182">Afinidad de direcciones de origen</span><span class="sxs-lookup"><span data-stu-id="1515f-182">Source address affinity</span></span>  <br/> |
|<span data-ttu-id="1515f-183">Lync Web App (solo usuarios internos)</span><span class="sxs-lookup"><span data-stu-id="1515f-183">Lync Web App (internal users only)</span></span>  <br/> <span data-ttu-id="1515f-184">Dispositivo móvil (no implementado)</span><span class="sxs-lookup"><span data-stu-id="1515f-184">Mobile device (not deployed)</span></span>  <br/> |<span data-ttu-id="1515f-185">Sin afinidad</span><span class="sxs-lookup"><span data-stu-id="1515f-185">No affinity</span></span>  <br/> |<span data-ttu-id="1515f-186">Afinidad de direcciones de origen</span><span class="sxs-lookup"><span data-stu-id="1515f-186">Source address affinity</span></span>  <br/> |
   
### <a name="port-monitoring-for-hardware-load-balancers"></a><span data-ttu-id="1515f-187">Supervisión de puertos para los equilibradores de carga de hardware</span><span class="sxs-lookup"><span data-stu-id="1515f-187">Port Monitoring for Hardware Load Balancers</span></span>

<span data-ttu-id="1515f-188">Es necesario definir la supervisión de puertos en los equilibradores de carga de hardware para determinar cuándo determinados servicios dejan de estar disponibles debido a errores de comunicaciones o de hardware.</span><span class="sxs-lookup"><span data-stu-id="1515f-188">You define port monitoring on the hardware load balancers to determine when specific services are no longer available due to hardware or communications failure.</span></span> <span data-ttu-id="1515f-189">Por ejemplo, si el servicio de servidor front-end (RTCSRV) se detiene porque se produce un error en el servidor front-end o el grupo de servidores front-end, la supervisión de HLB también debe dejar de recibir tráfico en los servicios web.</span><span class="sxs-lookup"><span data-stu-id="1515f-189">For example, if the Front End Server service (RTCSRV) stops because the Front End Server or Front End pool fails, the HLB monitoring should also stop receiving traffic on the Web Services.</span></span> <span data-ttu-id="1515f-190">La supervisión de puertos en el equilibrador de carga de hardware debe implementarse para supervisar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="1515f-190">You implement port monitoring on the HLB to monitor the following:</span></span>
  
<span data-ttu-id="1515f-191">**Grupo de usuarios del servidor front-end: interfaz interna de HLB**</span><span class="sxs-lookup"><span data-stu-id="1515f-191">**Front End Server User Pool - HLB Internal Interface**</span></span>

|<span data-ttu-id="1515f-192">**Puerto/IP virtual**</span><span class="sxs-lookup"><span data-stu-id="1515f-192">**Virtual IP/Port**</span></span>|<span data-ttu-id="1515f-193">**Puerto de nodo**</span><span class="sxs-lookup"><span data-stu-id="1515f-193">**Node Port**</span></span>|<span data-ttu-id="1515f-194">**Monitor/máquina de nodo**</span><span class="sxs-lookup"><span data-stu-id="1515f-194">**Node Machine/Monitor**</span></span>|<span data-ttu-id="1515f-195">**Perfil de persistencia**</span><span class="sxs-lookup"><span data-stu-id="1515f-195">**Persistence Profile**</span></span>|<span data-ttu-id="1515f-196">**Notas**</span><span class="sxs-lookup"><span data-stu-id="1515f-196">**Notes**</span></span>|
|:-----|:-----|:-----|:-----|:-----|
|<span data-ttu-id="1515f-197">\<pool\>web-int_mco_443_vs</span><span class="sxs-lookup"><span data-stu-id="1515f-197">\<pool\>web-int_mco_443_vs</span></span>  <br/> <span data-ttu-id="1515f-198">443</span><span class="sxs-lookup"><span data-stu-id="1515f-198">443</span></span>  <br/> |<span data-ttu-id="1515f-199">443</span><span class="sxs-lookup"><span data-stu-id="1515f-199">443</span></span>  <br/> |<span data-ttu-id="1515f-200">Front-end</span><span class="sxs-lookup"><span data-stu-id="1515f-200">Front End</span></span>  <br/> <span data-ttu-id="1515f-201">5061</span><span class="sxs-lookup"><span data-stu-id="1515f-201">5061</span></span>  <br/> |<span data-ttu-id="1515f-202">Origen</span><span class="sxs-lookup"><span data-stu-id="1515f-202">Source</span></span>  <br/> |<span data-ttu-id="1515f-203">HTTPS</span><span class="sxs-lookup"><span data-stu-id="1515f-203">HTTPS</span></span>  <br/> |
|<span data-ttu-id="1515f-204">\<pool\>web-int_mco_80_vs</span><span class="sxs-lookup"><span data-stu-id="1515f-204">\<pool\>web-int_mco_80_vs</span></span>  <br/> <span data-ttu-id="1515f-205">80</span><span class="sxs-lookup"><span data-stu-id="1515f-205">80</span></span>  <br/> |<span data-ttu-id="1515f-206">80</span><span class="sxs-lookup"><span data-stu-id="1515f-206">80</span></span>  <br/> |<span data-ttu-id="1515f-207">Front-end</span><span class="sxs-lookup"><span data-stu-id="1515f-207">Front End</span></span>  <br/> <span data-ttu-id="1515f-208">5061</span><span class="sxs-lookup"><span data-stu-id="1515f-208">5061</span></span>  <br/> |<span data-ttu-id="1515f-209">Origen</span><span class="sxs-lookup"><span data-stu-id="1515f-209">Source</span></span>  <br/> |<span data-ttu-id="1515f-210">HTTP</span><span class="sxs-lookup"><span data-stu-id="1515f-210">HTTP</span></span>  <br/> |
   
<span data-ttu-id="1515f-211">**Grupo de usuarios del servidor front-end: interfaz externa de HLB**</span><span class="sxs-lookup"><span data-stu-id="1515f-211">**Front End Server User Pool - HLB External Interface**</span></span>

|<span data-ttu-id="1515f-212">**Puerto/IP virtual**</span><span class="sxs-lookup"><span data-stu-id="1515f-212">**Virtual IP/Port**</span></span>|<span data-ttu-id="1515f-213">**Puerto de nodo**</span><span class="sxs-lookup"><span data-stu-id="1515f-213">**Node Port**</span></span>|<span data-ttu-id="1515f-214">**Monitor/máquina de nodo**</span><span class="sxs-lookup"><span data-stu-id="1515f-214">**Node Machine/Monitor**</span></span>|<span data-ttu-id="1515f-215">**Perfil de persistencia**</span><span class="sxs-lookup"><span data-stu-id="1515f-215">**Persistence Profile**</span></span>|<span data-ttu-id="1515f-216">**Notas**</span><span class="sxs-lookup"><span data-stu-id="1515f-216">**Notes**</span></span>|
|:-----|:-----|:-----|:-----|:-----|
|<span data-ttu-id="1515f-217">\<pool\>web_mco_443_vs</span><span class="sxs-lookup"><span data-stu-id="1515f-217">\<pool\>web_mco_443_vs</span></span>  <br/> <span data-ttu-id="1515f-218">443</span><span class="sxs-lookup"><span data-stu-id="1515f-218">443</span></span>  <br/> |<span data-ttu-id="1515f-219">4443</span><span class="sxs-lookup"><span data-stu-id="1515f-219">4443</span></span>  <br/> |<span data-ttu-id="1515f-220">Front-end</span><span class="sxs-lookup"><span data-stu-id="1515f-220">Front End</span></span>  <br/> <span data-ttu-id="1515f-221">5061</span><span class="sxs-lookup"><span data-stu-id="1515f-221">5061</span></span>  <br/> |<span data-ttu-id="1515f-222">Ninguno</span><span class="sxs-lookup"><span data-stu-id="1515f-222">None</span></span>  <br/> |<span data-ttu-id="1515f-223">HTTPS</span><span class="sxs-lookup"><span data-stu-id="1515f-223">HTTPS</span></span>  <br/> |
|<span data-ttu-id="1515f-224">\<pool\>web_mco_80_vs</span><span class="sxs-lookup"><span data-stu-id="1515f-224">\<pool\>web_mco_80_vs</span></span>  <br/> <span data-ttu-id="1515f-225">80</span><span class="sxs-lookup"><span data-stu-id="1515f-225">80</span></span>  <br/> |<span data-ttu-id="1515f-226">8080</span><span class="sxs-lookup"><span data-stu-id="1515f-226">8080</span></span>  <br/> |<span data-ttu-id="1515f-227">Front-end</span><span class="sxs-lookup"><span data-stu-id="1515f-227">Front End</span></span>  <br/> <span data-ttu-id="1515f-228">5061</span><span class="sxs-lookup"><span data-stu-id="1515f-228">5061</span></span>  <br/> |<span data-ttu-id="1515f-229">Ninguno</span><span class="sxs-lookup"><span data-stu-id="1515f-229">None</span></span>  <br/> |<span data-ttu-id="1515f-230">HTTP</span><span class="sxs-lookup"><span data-stu-id="1515f-230">HTTP</span></span>  <br/> |
   
## <a name="dns-load-balancing"></a><span data-ttu-id="1515f-231">Equilibrio de carga de DNS</span><span class="sxs-lookup"><span data-stu-id="1515f-231">DNS Load Balancing</span></span>
<span data-ttu-id="1515f-232"><a name="BKMK_DNSLoadBalancing"> </a></span><span class="sxs-lookup"><span data-stu-id="1515f-232"><a name="BKMK_DNSLoadBalancing"> </a></span></span>

<span data-ttu-id="1515f-233">Skype Empresarial Server habilita el equilibrio de carga de DNS, una solución de software que puede reducir en gran medida la sobrecarga de administración para el equilibrio de carga en la red.</span><span class="sxs-lookup"><span data-stu-id="1515f-233">Skype for Business Server enables DNS load balancing, a software solution that can greatly reduce the administration overhead for load balancing on your network.</span></span> <span data-ttu-id="1515f-234">El equilibrio de carga de DNS equilibra el tráfico de red que es exclusivo de Skype Empresarial Server, como el tráfico SIP y el tráfico de medios.</span><span class="sxs-lookup"><span data-stu-id="1515f-234">DNS load balancing balances the network traffic that is unique to Skype for Business Server, such as SIP traffic and media traffic.</span></span>
  
<span data-ttu-id="1515f-235">Si implementa el equilibrio de carga de DNS, se minimizará la sobrecarga de administración de la organización para los equilibradores de carga de hardware.</span><span class="sxs-lookup"><span data-stu-id="1515f-235">If you deploy DNS load balancing, your organization's administration overhead for hardware load balancers will be minimized.</span></span> <span data-ttu-id="1515f-236">Además, se evitará la solución de problemas complejos asociados a errores de configuración de equilibradores de carga del tráfico SIP.</span><span class="sxs-lookup"><span data-stu-id="1515f-236">Additionally, complex troubleshooting of problems related to misconfiguration of load balancers for SIP traffic will be eliminated.</span></span> <span data-ttu-id="1515f-237">También puede impedir que se establezcan conexiones de servidores para poder desconectar servidores.</span><span class="sxs-lookup"><span data-stu-id="1515f-237">You can also prevent server connections so that you can take servers offline.</span></span> <span data-ttu-id="1515f-238">El equilibrio de carga de DNS también garantiza que los problemas relacionados con los equilibradores de carga de hardware no afecten a elementos de tráfico SIP, como el enrutamiento de llamadas básico.</span><span class="sxs-lookup"><span data-stu-id="1515f-238">DNS load balancing also ensures that hardware load balancer problems do not affect elements of SIP traffic such as basic call routing.</span></span>

<span data-ttu-id="1515f-239">En el siguiente diagrama se muestra un ejemplo que incluye el equilibrio de carga de DNS interno y externo:</span><span class="sxs-lookup"><span data-stu-id="1515f-239">The following diagram shows an example that includes both internal and external DNS load balancing:</span></span> 
  
<span data-ttu-id="1515f-240">**Diagrama de red perimetral con direcciones IPv4 públicas**</span><span class="sxs-lookup"><span data-stu-id="1515f-240">**Edge network diagram using Public IPv4 addresses**</span></span>

![ejemplo de diagrama de red DNS](../../media/2cc9546e-5560-4d95-8fe4-65a792a0e9c3.png)
  
<span data-ttu-id="1515f-242">Si se utiliza el equilibrio de carga de DNS también podría adquirir equilibradores de carga de hardware a un precio más económico que si usa equilibradores de carga de hardware para todos los tipos de tráfico.</span><span class="sxs-lookup"><span data-stu-id="1515f-242">If you use DNS load balancing, you may also be able to purchase lower-cost hardware load balancers than if you used the hardware load balancers for all types of traffic.</span></span> <span data-ttu-id="1515f-243">Debe usar equilibradores de carga que han superado las pruebas de calificación de interoperabilidad con Skype Empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="1515f-243">You should use load balancers that have passed interoperability qualification testing with Skype for Business Server.</span></span> <span data-ttu-id="1515f-244">Para obtener más información acerca de las pruebas de interoperabilidad del equilibrador de carga, consulte [Lync Server 2010 Load Balancer Partners](https://go.microsoft.com/fwlink/p/?linkId=202452).</span><span class="sxs-lookup"><span data-stu-id="1515f-244">For details about load balancer interoperability testing, see [Lync Server 2010 Load Balancer Partners](https://go.microsoft.com/fwlink/p/?linkId=202452).</span></span> <span data-ttu-id="1515f-245">El contenido se aplica a Skype Empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="1515f-245">The content there applies to Skype for Business Server.</span></span>
  
<span data-ttu-id="1515f-246">El equilibro de carga de DNS es compatible con los grupos front-end, los grupos de servidores perimetrales, los grupos de director y los grupos del servidor de mediación independientes.</span><span class="sxs-lookup"><span data-stu-id="1515f-246">DNS load balancing is supported for Front End pools, Edge Server pools, Director pools, and stand-alone Mediation Server pools.</span></span>
  
<span data-ttu-id="1515f-247">El equilibrio de carga de DNS suele implementarse en el nivel de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="1515f-247">DNS load balancing is typically implemented at the application level.</span></span> <span data-ttu-id="1515f-248">La aplicación (por ejemplo, un cliente que ejecuta Skype Empresarial) intenta conectarse a un servidor de un grupo de servidores conectándose a una de las direcciones IP devueltas desde la consulta de registro A y AAAA (si se usa el direccionamiento IPv6) de DNS para el nombre de dominio completo (FQDN) del grupo de servidores.</span><span class="sxs-lookup"><span data-stu-id="1515f-248">The application (for example, a client running Skype for Business), tries to connect to a server in a pool by connecting to one of the IP addresses returned from the DNS A and AAAA (if IPv6 addressing is used) record query for the pool fully qualified domain name (FQDN).</span></span> 
  
<span data-ttu-id="1515f-249">Por ejemplo, si hay tres servidores front-end en un grupo de servidores denominado pool01.contoso.com, pasará lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="1515f-249">For example, if there are three front end servers in a pool named pool01.contoso.com, the following will happen:</span></span>
  
- <span data-ttu-id="1515f-250">Los clientes que ejecutan Skype Empresarial consultan DNS para pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="1515f-250">Clients running Skype for Business query DNS for pool01.contoso.com.</span></span> <span data-ttu-id="1515f-251">La consulta devuelve tres direcciones IP y las almacena en caché de la siguiente manera (no necesariamente en este orden):</span><span class="sxs-lookup"><span data-stu-id="1515f-251">The query returns three IP addresses and caches them as follows (not necessarily in this order):</span></span>
    
    <span data-ttu-id="1515f-252">pool01.contoso.com 192.168.10.90</span><span class="sxs-lookup"><span data-stu-id="1515f-252">pool01.contoso.com 192.168.10.90</span></span>
    
    <span data-ttu-id="1515f-253">pool01.contoso.com 192.168.10.91</span><span class="sxs-lookup"><span data-stu-id="1515f-253">pool01.contoso.com 192.168.10.91</span></span>
    
    <span data-ttu-id="1515f-254">pool01.contoso.com 192.168.10.92</span><span class="sxs-lookup"><span data-stu-id="1515f-254">pool01.contoso.com 192.168.10.92</span></span>
    
- <span data-ttu-id="1515f-255">El cliente intenta establecer una conexión del Protocolo de control de transmisión (TCP) a una de las direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="1515f-255">The client attempts to establish a Transmission Control Protocol (TCP) connection to one of the IP addresses.</span></span> <span data-ttu-id="1515f-256">Si no funciona, lo intentará con la siguiente dirección IP almacenada en caché.</span><span class="sxs-lookup"><span data-stu-id="1515f-256">If that fails, the client tries the next IP address in the cache.</span></span>
    
- <span data-ttu-id="1515f-257">Si la conexión TCP se realiza correctamente, el cliente negocia TLS para conectarse al registrador principal en pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="1515f-257">If the TCP connection succeeds, the client negotiates TLS to connect to the primary registrar on pool01.contoso.com.</span></span>
    
- <span data-ttu-id="1515f-258">Si el cliente intenta todas las entradas almacenadas en caché sin una conexión correcta, se notifica al usuario que no hay servidores que ejecuten Skype Empresarial Server en este momento.</span><span class="sxs-lookup"><span data-stu-id="1515f-258">If the client tries all cached entries without a successful connection, the user is notified that no servers running Skype for Business Server are available at the moment.</span></span>
    
> [!NOTE]
> <span data-ttu-id="1515f-259">El equilibrio de carga basado en DNS es distinto al round robin de DNS (DNS RR), que normalmente hace referencia al equilibrio de carga usando el DNS para proporcionar un orden distinto de direcciones IP correspondientes a los servidores de un grupo de servidores.</span><span class="sxs-lookup"><span data-stu-id="1515f-259">DNS-based load balancing is different from DNS round robin (DNS RR) which typically refers to load balancing by relying on DNS to provide a different order of IP addresses corresponding to the servers in a pool.</span></span> <span data-ttu-id="1515f-260">Por lo general, DNS RR solo habilita la distribución de carga, pero no habilita la conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="1515f-260">Typically DNS RR only enables load distribution, but does not enable failover.</span></span> <span data-ttu-id="1515f-261">Por ejemplo, si se produce un error en la conexión a la única dirección IP devuelta por la consulta A y AAAA (si usa el direccionamiento IPv6) de DNS, se produce un error en la conexión.</span><span class="sxs-lookup"><span data-stu-id="1515f-261">For example, if the connection to the one IP address returned by the DNS A and AAAA (if you are using IPv6 addressing) query fails, the connection fails.</span></span> <span data-ttu-id="1515f-262">Por tanto, el round robin de DNS por sí solo es menos fiable que el equilibrio de carga basado en DNS.</span><span class="sxs-lookup"><span data-stu-id="1515f-262">Therefore, DNS round robin by itself is less reliable than DNS-based load balancing.</span></span> <span data-ttu-id="1515f-263">Puede usar el round robin de DNS junto con el equilibrio de carga de DNS.</span><span class="sxs-lookup"><span data-stu-id="1515f-263">You can use DNS round robin in conjunction with DNS load balancing.</span></span> 
  
<span data-ttu-id="1515f-264">El equilibrio de carga de DNS se usa para lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="1515f-264">DNS load balancing is used for the following:</span></span>
  
- <span data-ttu-id="1515f-265">Equilibrio de carga de SIP de servidor a servidor con los servidores perimetrales</span><span class="sxs-lookup"><span data-stu-id="1515f-265">Load balancing server-to-server SIP to the Edge Servers</span></span>
    
- <span data-ttu-id="1515f-266">Equilibrar la carga de aplicaciones de servicios de aplicaciones de comunicaciones unificadas (UCAS, Unified Communications Application Services), como Operador automático de conferencia, Grupo de respuesta y Estacionamiento de llamadas.</span><span class="sxs-lookup"><span data-stu-id="1515f-266">Load balancing Unified Communications Application Services (UCAS) applications such as Conferencing Auto Attendant, Response Group, and Call Park</span></span>
    
- <span data-ttu-id="1515f-267">Impedir el establecimiento de nuevas conexiones con aplicaciones UCAS (proceso también conocido como "purga").</span><span class="sxs-lookup"><span data-stu-id="1515f-267">Preventing new connections to UCAS applications (also known as "draining")</span></span>
    
- <span data-ttu-id="1515f-268">Equilibrar la carga de todo el tráfico de servidor a cliente entre clientes y servidores perimetrales</span><span class="sxs-lookup"><span data-stu-id="1515f-268">Load balancing all client-to-server traffic between clients and Edge Servers</span></span>
    
<span data-ttu-id="1515f-269">El equilibrio de carga de DNS no puede usarse para:</span><span class="sxs-lookup"><span data-stu-id="1515f-269">DNS load balancing cannot be used for the following:</span></span>
  
- <span data-ttu-id="1515f-270">Tráfico web de cliente a servidor a servidores front-end o directores</span><span class="sxs-lookup"><span data-stu-id="1515f-270">Client-to-server web traffic to Director or Front End Servers</span></span>
    
<span data-ttu-id="1515f-271">Equilibrio de carga de DNS y tráfico federado:</span><span class="sxs-lookup"><span data-stu-id="1515f-271">DNS load balancing and federated traffic:</span></span>
  
<span data-ttu-id="1515f-272">Si una consulta SRV de DNS devuelve varios registros DNS, el servicio perimetral de acceso siempre selecciona el registro SRV de DNS con la prioridad numérica más baja y el peso numérico más alto.</span><span class="sxs-lookup"><span data-stu-id="1515f-272">If multiple DNS records are returned by a DNS SRV query, the Access Edge service always picks the DNS SRV record with the lowest numeric priority and highest numeric weight.</span></span> <span data-ttu-id="1515f-273">El documento "Un RR de DNS para especificar la ubicación de los servicios (DNS SRV)" [RFC 2782, DNS SRV RR](https://www.ietf.org/rfc/rfc2782.txt) especifica que si hay varios registros SRV de DNS definidos, primero se usa la prioridad y, a continuación, el peso.</span><span class="sxs-lookup"><span data-stu-id="1515f-273">The Internet Engineering Task Force document "A DNS RR for specifying the location of services (DNS SRV)" [RFC 2782, DNS SRV RR](https://www.ietf.org/rfc/rfc2782.txt) specifies that if there are multiple DNS SRV records defined, priority is first used, then weight.</span></span> <span data-ttu-id="1515f-274">Por ejemplo, el registro SRV de DNS A tiene un peso de 20 y una prioridad de 40 y el registro SRV de DNS B tiene un peso de 10 y una prioridad de 50.</span><span class="sxs-lookup"><span data-stu-id="1515f-274">For example DNS SRV record A has a weight of 20 and a priority of 40 and DNS SRV record B has a weight of 10 and priority of 50.</span></span> <span data-ttu-id="1515f-275">Se seleccionará el registro SRV de DNS A con prioridad 40.</span><span class="sxs-lookup"><span data-stu-id="1515f-275">DNS SRV record A with priority 40 will be selected.</span></span> <span data-ttu-id="1515f-276">Las siguientes reglas se aplican a la selección de registros SRV de DNS:</span><span class="sxs-lookup"><span data-stu-id="1515f-276">The following rules apply to DNS SRV record selection:</span></span>
  
- <span data-ttu-id="1515f-277">La prioridad se considera en primer lugar.</span><span class="sxs-lookup"><span data-stu-id="1515f-277">Priority is considered first.</span></span> <span data-ttu-id="1515f-278">Un cliente DEBE intentar ponerse en contacto con el host de destino definido por el registro SRV de DNS con la prioridad numerada más baja que pueda alcanzar.</span><span class="sxs-lookup"><span data-stu-id="1515f-278">A client MUST attempt to contact the target host defined by the DNS SRV record with the lowest numbered priority it can reach.</span></span> <span data-ttu-id="1515f-279">Los destinos con la misma prioridad DEBEN probarse en un orden definido por el campo de peso.</span><span class="sxs-lookup"><span data-stu-id="1515f-279">Targets with the same priority SHOULD be tried in an order defined by the weight field.</span></span>
    
- <span data-ttu-id="1515f-280">El campo de peso especifica un peso relativo para las entradas con la misma prioridad.</span><span class="sxs-lookup"><span data-stu-id="1515f-280">The weight field specifies a relative weight for entries with the same priority.</span></span> <span data-ttu-id="1515f-281">Los pesos más grandes DEBEN tener una probabilidad proporcionalmente mayor de ser seleccionados.</span><span class="sxs-lookup"><span data-stu-id="1515f-281">Larger weights SHOULD be given a proportionately higher probability of being selected.</span></span> <span data-ttu-id="1515f-282">Los administradores de DNS DEBEN usar el peso 0 cuando no hay ninguna selección de servidor que hacer.</span><span class="sxs-lookup"><span data-stu-id="1515f-282">DNS administrators SHOULD use Weight 0 when there isn't any server selection to do.</span></span> <span data-ttu-id="1515f-283">En presencia de registros que contienen pesos mayores que 0, los registros con peso 0 deben tener una probabilidad muy pequeña de ser seleccionados.</span><span class="sxs-lookup"><span data-stu-id="1515f-283">In the presence of records containing weights greater than 0, records with weight 0 should have a very small chance of being selected.</span></span>
    
<span data-ttu-id="1515f-284">Si se devuelven varios registros DNS SRV con la misma prioridad y peso, el servicio perimetral de acceso seleccionará el registro SRV que se recibió primero desde el servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="1515f-284">If multiple DNS SRV records with equal priority and weight are returned, the Access Edge service will select the SRV record that was received first from the DNS server.</span></span>
  
### <a name="dns-load-balancing-on-front-end-pools-and-director-pools"></a><span data-ttu-id="1515f-285">Equilibrio de carga DNS en grupos de servidores front-end y grupos de servidores de director</span><span class="sxs-lookup"><span data-stu-id="1515f-285">DNS Load Balancing on Front End Pools and Director Pools</span></span>

<span data-ttu-id="1515f-p130">Puede usar el equilibrio de carga DNS para el tráfico SIP de los grupos de servidores front-end y grupos de servidores de director. Con el equilibrio de carga DNS implementado, seguirá necesitando usar también equilibradores de carga de hardware para esos grupos de servidores, pero solo para el tráfico HTTPS de cliente a servidor. El equilibrador de carga de hardware se usa para el tráfico HTTPS de los clientes en los puertos 443 y 80.</span><span class="sxs-lookup"><span data-stu-id="1515f-p130">You can use DNS load balancing for the SIP traffic on Front End pools and Director pools. With DNS load balancing deployed, you still need to also use hardware load balancers for these pools, but only for client-to-server HTTPS traffic. The hardware load balancer is used for HTTPS traffic from clients over ports 443 and 80.</span></span> 
  
<span data-ttu-id="1515f-289">A pesar de que seguirá necesitando equilibradores de carga de hardware para esos grupos de servidores, su instalación y administración será fundamentalmente para el tráfico HTTPS, al que están habituados los administradores de equilibradores de carga de hardware.</span><span class="sxs-lookup"><span data-stu-id="1515f-289">Although you still need hardware load balancers for these pools, their setup and administration will be primarily for HTTPS traffic, which the administrators of hardware load balancers are accustomed to.</span></span>
  
#### <a name="dns-load-balancing-and-supporting-older-clients-and-servers"></a><span data-ttu-id="1515f-290">Equilibrio de carga DNS y compatibilidad con clientes y servidores más antiguos</span><span class="sxs-lookup"><span data-stu-id="1515f-290">DNS Load Balancing and Supporting Older Clients and Servers</span></span>

<span data-ttu-id="1515f-291">El equilibrio de carga de DNS solo admite la conmutación por error automática para los servidores que ejecutan Skype Empresarial Server o Lync Server 2010, y para clientes de Lync 2013 y Skype Empresarial.</span><span class="sxs-lookup"><span data-stu-id="1515f-291">DNS load balancing supports automatic failover only for servers running Skype for Business Server or Lync Server 2010, and for Lync 2013 and Skype for Business clients.</span></span> <span data-ttu-id="1515f-292">Las versiones anteriores de los clientes y Office Communications Server aún pueden conectarse a grupos que ejecutan equilibrio de carga dns, pero si no pueden establecer una conexión con el primer servidor al que hace referencia el equilibrio de carga de DNS, no podrán conmutar por error a otro servidor del grupo.</span><span class="sxs-lookup"><span data-stu-id="1515f-292">Earlier versions of clients and Office Communications Server can still connect to pools running DNS load balancing, but if they cannot make a connection to the first server that DNS load balancing refers them to, they are unable to fail over to another server in the pool.</span></span> 
  
<span data-ttu-id="1515f-293">Además, si usa la mensajería unificada de Exchange, debe usar un mínimo de Exchange 2010 SP1 para obtener compatibilidad con el equilibrio de carga de DNS de Skype Empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="1515f-293">Additionally, if you are using Exchange UM, you must use a minimum of Exchange 2010 SP1 to get support for Skype for Business Server DNS load balancing.</span></span> <span data-ttu-id="1515f-294">Si usa una versión anterior de Exchange, los usuarios no tendrán capacidades de conmutación por error para estos escenarios de mensajería unificada de Exchange:</span><span class="sxs-lookup"><span data-stu-id="1515f-294">If you use an earlier version of Exchange, your users will not have failover capabilities for these Exchange UM scenarios:</span></span>
  
- <span data-ttu-id="1515f-295">Reproducir el correo de voz enterprise en su teléfono</span><span class="sxs-lookup"><span data-stu-id="1515f-295">Playing their Enterprise voicemail on their phone</span></span>
    
- <span data-ttu-id="1515f-296">Transferir llamadas de un operador automático de la mensajería unificada de Exchange</span><span class="sxs-lookup"><span data-stu-id="1515f-296">Transferring calls from an Exchange UM Auto Attendant</span></span>
    
<span data-ttu-id="1515f-297">Todos los demás escenarios de la mensajería unificada de Exchange funcionarán correctamente.</span><span class="sxs-lookup"><span data-stu-id="1515f-297">All other Exchange UM scenarios will work properly.</span></span>
  
#### <a name="deploying-dns-load-balancing-on-front-end-pools-and-director-pools"></a><span data-ttu-id="1515f-298">Implementación del equilibrio de carga DNS en grupos de servidores front-end y grupos de servidores de director</span><span class="sxs-lookup"><span data-stu-id="1515f-298">Deploying DNS Load Balancing on Front End Pools and Director Pools</span></span>
<span data-ttu-id="1515f-299"><a name="BK_FE_Dir"> </a></span><span class="sxs-lookup"><span data-stu-id="1515f-299"><a name="BK_FE_Dir"> </a></span></span>

<span data-ttu-id="1515f-300">Para implementar el equilibrio de carga DNS en grupos de servidores front-end y grupos de servidores de director, es necesario realizar un par de pasos adicionales con los registros DNS y los FQDN.</span><span class="sxs-lookup"><span data-stu-id="1515f-300">Deploying DNS load balancing on Front End pools and Director pools requires you to perform a couple of extra steps with FQDNs and DNS records.</span></span>
  
- <span data-ttu-id="1515f-301">Un grupo de servidores que usa el equilibrio de carga de DNS debe tener dos FQDN: el FQDN del grupo normal que usa el equilibrio de carga de DNS (como pool01.contoso.com) y se resuelve en las DIRECCIONES IP físicas de los servidores del grupo de servidores y otro FQDN para los servicios web del grupo (como web01.contoso.com), que se resuelve en la dirección IP virtual del grupo.</span><span class="sxs-lookup"><span data-stu-id="1515f-301">A pool that uses DNS load balancing must have two FQDNs: the regular pool FQDN that is used by DNS load balancing (such as pool01.contoso.com), and resolves to the physical IPs of the servers in the pool, and another FQDN for the pool's Web services (such as web01.contoso.com), which resolves to virtual IP address of the pool.</span></span> 
    
    <span data-ttu-id="1515f-302">En el Generador de topologías, si desea implementar el equilibrio de carga dns para un grupo de servidores, para crear este FQDN adicional para  los servicios web del grupo, debe activar la casilla invalidar el **FQDN** del grupo de servidores de servicios web internos y escribir el FQDN, en la página Especificar las direcciones URL de servicios web para este grupo de servidores.</span><span class="sxs-lookup"><span data-stu-id="1515f-302">In Topology Builder, if you want to deploy DNS load balancing for a pool, to create this extra FQDN for the pool's Web services you must select the **Override internal Web Services pool FQDN** check box and type the FQDN, in the **Specify the Web Services URLs for this Pool** page.</span></span>
    
- <span data-ttu-id="1515f-p133">Para admitir el FQDN que usa el equilibrio de carga DNS, debe aprovisionar el DNS de modo que resuelva el FQDN del grupo de servidores (como, por ejemplo, pool01.contoso.com) como las direcciones IP de todos los servidores del grupo de servidores (por ejemplo, 192.168.1.1, 192.168.1.2, etc.). Solo deberá incluir las direcciones IP de los servidores implementados actualmente.</span><span class="sxs-lookup"><span data-stu-id="1515f-p133">To support the FQDN used by DNS load balancing, you must provision DNS to resolve the pool FQDN (such as pool01.contoso.com) to the IP addresses of all the servers in the pool (for example, 192.168.1.1, 192.168.1.2, and so on). You should include only the IP addresses of servers that are currently deployed.</span></span>
    
    > [!CAUTION]
    > <span data-ttu-id="1515f-305">Si tiene más de un grupo de servidores front-end o un servidor front-end, el FQDN de los servicios web externos debe ser único.</span><span class="sxs-lookup"><span data-stu-id="1515f-305">If you have more than one Front End pool or Front End Server the external Web services FQDN must be unique.</span></span> <span data-ttu-id="1515f-306">Por ejemplo, si define el FQDN de servicios web externos de un servidor front-end como **pool01.contoso.com**, no puede usar **pool01.contoso.com** para otro grupo de servidores front-end o servidor front-end.</span><span class="sxs-lookup"><span data-stu-id="1515f-306">For example, if you define the external Web services FQDN of a Front End Server as **pool01.contoso.com**, you cannot use **pool01.contoso.com** for another Front End pool or Front End Server.</span></span> <span data-ttu-id="1515f-307">Si también implementa directores, el FQDN de servicios web externos definido para cualquier director o grupo de directores debe ser único de cualquier otro director o grupo de directores, así como de cualquier grupo de servidores front-end o servidor front-end.</span><span class="sxs-lookup"><span data-stu-id="1515f-307">If you are also deploying Directors, the external Web services FQDN defined for any Director or Director pool must be unique from any other Director or Director pool as well as any Front End pool or Front End Server.</span></span> <span data-ttu-id="1515f-308">Si decide invalidar los servicios web internos con un FQDN autodefinido, cada FQDN debe ser único de cualquier otro grupo de servidores front-end, director o grupo de directores.</span><span class="sxs-lookup"><span data-stu-id="1515f-308">If decide to override the Internal web services with a self-defined FQDN, each FQDN must be unique from any other Front End pool, Director or a Director pool.</span></span>
  
### <a name="dns-load-balancing-on-edge-server-pools"></a><span data-ttu-id="1515f-309">Equilibrio de carga DNS en grupos de servidores perimetrales</span><span class="sxs-lookup"><span data-stu-id="1515f-309">DNS Load Balancing on Edge Server Pools</span></span>
<span data-ttu-id="1515f-310"><a name="BK_Edge"> </a></span><span class="sxs-lookup"><span data-stu-id="1515f-310"><a name="BK_Edge"> </a></span></span>

<span data-ttu-id="1515f-p135">Puede implementar el equilibrio de carga DNS en grupos de servidores perimetrales. Si lo hace, debe tener en cuenta varias consideraciones.</span><span class="sxs-lookup"><span data-stu-id="1515f-p135">You can deploy DNS load balancing on Edge Server pools. If you do, you must be aware of some considerations.</span></span>
  
<span data-ttu-id="1515f-313">El uso del equilibrio de carga DNS en los servidores perimetrales provoca una pérdida en la capacidad de conmutación por error, en los siguientes escenarios:</span><span class="sxs-lookup"><span data-stu-id="1515f-313">Using DNS load balancing on your Edge Servers causes a loss of failover ability in the following scenarios:</span></span>
  
- <span data-ttu-id="1515f-314">Federación con organizaciones que ejecutan versiones de Skype Empresarial Server publicadas antes de Lync Server 2010.</span><span class="sxs-lookup"><span data-stu-id="1515f-314">Federation with organizations that are running versions of Skype for Business Server released prior to Lync Server 2010.</span></span>
    
- <span data-ttu-id="1515f-315">Intercambio de mensajes instantáneos con usuarios de servicios públicos de mensajería instantánea (MI) AOL y Yahoo!, además de proveedores y servidores basados en XMPP, como Google Talk, actualmente el único socio XMPP compatible.</span><span class="sxs-lookup"><span data-stu-id="1515f-315">Instant message exchange with users of public instant messaging (IM) services AOL and Yahoo!, in addition to XMPP-based providers and servers, such as Google Talk, currently the only supported XMPP partner.</span></span>
    
<span data-ttu-id="1515f-316">Estos escenarios funcionarán siempre que se ejecuten correctamente todos los servidores perimetrales del grupo de servidores pero, si un servidor perimetral no está disponible, fallarán todas las solicitudes de estos escenarios que se envíen a él, en lugar de enrutarse a otro servidor perimetral.</span><span class="sxs-lookup"><span data-stu-id="1515f-316">These scenarios will work as long as all Edge Servers in the pool are up and running, but if one Edge Server is unavailable, any requests for these scenarios that are sent to it will fail, instead of routing to another Edge Server.</span></span>
  
 <span data-ttu-id="1515f-317">Si usa la mensajería unificada de Exchange, debe usar un mínimo de Exchange 2013 para obtener compatibilidad con el equilibrio de carga dns de Skype Empresarial Server en el servidor perimetral.</span><span class="sxs-lookup"><span data-stu-id="1515f-317">If you are using Exchange UM, you must use a minimum of Exchange 2013 to get support for Skype for Business Server DNS load balancing on Edge.</span></span> <span data-ttu-id="1515f-318">Si usa una versión anterior de Exchange, los usuarios remotos no tendrán capacidades de conmutación por error para estos escenarios de mensajería unificada de Exchange:</span><span class="sxs-lookup"><span data-stu-id="1515f-318">If you use an earlier version of Exchange, your remote users will not have failover capabilities for these Exchange UM scenarios:</span></span>
  
- <span data-ttu-id="1515f-319">Reproducir el correo de voz enterprise en su teléfono</span><span class="sxs-lookup"><span data-stu-id="1515f-319">Playing their Enterprise voicemail on their phone</span></span>
    
- <span data-ttu-id="1515f-320">Transferir llamadas de un operador automático de la mensajería unificada de Exchange</span><span class="sxs-lookup"><span data-stu-id="1515f-320">Transferring calls from an Exchange UM Auto Attendant</span></span>
    
<span data-ttu-id="1515f-321">Todos los demás escenarios de la mensajería unificada de Exchange funcionarán correctamente.</span><span class="sxs-lookup"><span data-stu-id="1515f-321">All other Exchange UM scenarios will work properly.</span></span>
  
<span data-ttu-id="1515f-p137">La interfaz perimetral interna y la interfaz perimetral externa deben usar el mismo tipo de equilibrio de carga. No puede usar equilibrio de carga DNS en una interfaz perimetral y equilibrio de carga de hardware en la otra interfaz perimetral.</span><span class="sxs-lookup"><span data-stu-id="1515f-p137">The internal Edge interface and external Edge interface must use the same type of load balancing. You cannot use DNS load balancing on one Edge interface and hardware load balancing on the other Edge interface.</span></span>
  
#### <a name="deploying-dns-load-balancing-on-edge-server-pools"></a><span data-ttu-id="1515f-324">Implementación del equilibrio de carga DNS en grupos de servidores perimetrales</span><span class="sxs-lookup"><span data-stu-id="1515f-324">Deploying DNS Load Balancing on Edge Server Pools</span></span>

<span data-ttu-id="1515f-325">Para implementar el equilibrio de carga DNS en la interfaz externa de su grupo de servidores perimetrales, necesita las siguientes entradas DNS:</span><span class="sxs-lookup"><span data-stu-id="1515f-325">To deploy DNS load balancing on the external interface of your Edge Server pool, you need the following DNS entries:</span></span>
  
- <span data-ttu-id="1515f-326">Para el servicio perimetral de acceso, necesita una entrada para cada servidor del grupo.</span><span class="sxs-lookup"><span data-stu-id="1515f-326">For the Access Edge service, you need one entry for each server in the pool.</span></span> <span data-ttu-id="1515f-327">Cada entrada debe resolver el FQDN del servicio perimetral de acceso (por ejemplo, sip.contoso.com) en la dirección IP del servicio perimetral de acceso en uno de los servidores perimetrales del grupo de servidores.</span><span class="sxs-lookup"><span data-stu-id="1515f-327">Each entry must resolve the FQDN of the Access Edge service (for example, sip.contoso.com) to the IP address of the Access Edge service on one of the Edge Servers in the pool.</span></span>
    
- <span data-ttu-id="1515f-328">Para el servicio perimetral de conferencia web, necesita una entrada para cada servidor del grupo.</span><span class="sxs-lookup"><span data-stu-id="1515f-328">For the Web Conferencing Edge service, you need one entry for each server in the pool.</span></span> <span data-ttu-id="1515f-329">Cada entrada debe resolver el FQDN del servicio perimetral de conferencia web (por ejemplo, webconf.contoso.com) en la dirección IP del servicio perimetral de conferencia web en uno de los servidores perimetrales del grupo.</span><span class="sxs-lookup"><span data-stu-id="1515f-329">Each entry must resolve the FQDN of the Web Conferencing Edge service (for example, webconf.contoso.com) to the IP address of the Web Conferencing Edge service on one of the Edge Servers in the pool.</span></span>
    
- <span data-ttu-id="1515f-330">Para el servicio perimetral de audio y vídeo, necesita una entrada para cada servidor del grupo.</span><span class="sxs-lookup"><span data-stu-id="1515f-330">For the Audio/Video Edge service, you need one entry for each server in the pool.</span></span> <span data-ttu-id="1515f-331">Cada entrada debe resolver el FQDN del servicio perimetral de audio y vídeo (por ejemplo, av.contoso.com) en la dirección IP del servicio perimetral A/V en uno de los servidores perimetrales del grupo.</span><span class="sxs-lookup"><span data-stu-id="1515f-331">Each entry must resolve the FQDN of the Audio/Video Edge service (for example, av.contoso.com) to the IP address of the A/V Edge service on one of the Edge Servers in the pool.</span></span>
    
<span data-ttu-id="1515f-332">Para implementar el equilibrio de carga DNS en la interfaz interna del grupo de servidores perimetrales, debe agregar un registro DNS A que resuelva el FQDN interno del grupo de servidores perimetrales en la dirección IP de cada servidor del grupo de servidores.</span><span class="sxs-lookup"><span data-stu-id="1515f-332">To deploy DNS load balancing on the internal interface of your Edge Server pool, you must add one DNS A record, which resolves the internal FQDN of the Edge Server pool to the IP address of each server in the pool.</span></span>
  
### <a name="using-dns-load-balancing-on-mediation-server-pools"></a><span data-ttu-id="1515f-333">Uso del equilibrio de carga DNS en grupos de servidores de mediación</span><span class="sxs-lookup"><span data-stu-id="1515f-333">Using DNS Load Balancing on Mediation Server Pools</span></span>
<span data-ttu-id="1515f-334"><a name="BK_Mediation"> </a></span><span class="sxs-lookup"><span data-stu-id="1515f-334"><a name="BK_Mediation"> </a></span></span>

<span data-ttu-id="1515f-p141">Puede usar el equilibrio de carga DNS en grupos de servidores de mediación independientes. Todo el tráfico de medios y SIP se equilibra con el equilibrio de carga DNS.</span><span class="sxs-lookup"><span data-stu-id="1515f-p141">You can use DNS load balancing on stand-alone Mediation Server pools. All SIP and media traffic is balanced by DNS load balancing.</span></span>
  
<span data-ttu-id="1515f-337">Para implementar el equilibrio de carga DNS en un grupo de servidores de mediación, debe aprovisionar el DNS de modo que resuelva el FQDN del grupo de servidores (por ejemplo, mediationpool1.contoso.com) como las direcciones IP de todos los servidores del grupo de servidores (por ejemplo, 192.168.1.1, 192.168.1.2, etc.).</span><span class="sxs-lookup"><span data-stu-id="1515f-337">To deploy DNS load balancing on a Mediation Server pool, you must provision DNS to resolve the pool FQDN (for example, mediationpool1.contoso.com) to the IP addresses of all the servers in the pool (for example, 192.168.1.1, 192.168.1.2, and so on).</span></span>
  
### <a name="blocking-traffic-to-a-server-with-dns-load-balancing"></a><span data-ttu-id="1515f-338">Bloquear el tráfico a un servidor con equilibrio de carga dns</span><span class="sxs-lookup"><span data-stu-id="1515f-338">Blocking Traffic to a Server With DNS Load Balancing</span></span>
<span data-ttu-id="1515f-339"><a name="BK_Mediation"> </a></span><span class="sxs-lookup"><span data-stu-id="1515f-339"><a name="BK_Mediation"> </a></span></span>

<span data-ttu-id="1515f-340">Si usa el equilibrio de carga de DNS y necesita bloquear el tráfico a un equipo específico, no es suficiente simplemente quitar las entradas de dirección IP del FQDN del grupo de servidores.</span><span class="sxs-lookup"><span data-stu-id="1515f-340">If you use DNS load balancing and you need to block traffic to a specific computer, it is not sufficient to just remove the IP address entries from the Pool FQDN.</span></span> <span data-ttu-id="1515f-341">También debe quitar la entrada DNS del equipo.</span><span class="sxs-lookup"><span data-stu-id="1515f-341">You must remove the DNS entry for the computer as well.</span></span> 
  
<span data-ttu-id="1515f-342">Tenga en cuenta que para el tráfico de servidor a servidor, Skype Empresarial Server usa equilibrio de carga para topologías.</span><span class="sxs-lookup"><span data-stu-id="1515f-342">Note that for server-to-server traffic, Skype for Business Server uses topology-aware load balancing.</span></span> <span data-ttu-id="1515f-343">Los servidores leen la topología publicada en el almacén de administración central para obtener los FQDN de los servidores de la topología y distribuir automáticamente el tráfico entre los servidores.</span><span class="sxs-lookup"><span data-stu-id="1515f-343">Servers read the published topology in the Central Management store to obtain the FQDNs of servers in the topology, and automatically distribute the traffic among the servers.</span></span> <span data-ttu-id="1515f-344">Para impedir que un servidor reciba tráfico de servidor a servidor, debe quitar el servidor de la topología.</span><span class="sxs-lookup"><span data-stu-id="1515f-344">To block a server from receiving server-to-server traffic, you must remove the server from the topology.</span></span> 
  

