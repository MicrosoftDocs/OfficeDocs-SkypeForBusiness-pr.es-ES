---
title: Planeación avanzada de DNS del servidor perimetral para Skype Empresarial Server
ms.reviewer: ''
ms.author: v-cichur
author: cichur
audience: ITPro
manager: serdars
ms.topic: conceptual
ms.prod: skype-for-business-itpro
f1.keywords:
- NOCSH
localization_priority: Normal
ms.collection:
- IT_Skype16
- Strat_SB_Hybrid
ms.custom: ''
ms.assetid: f3a5895f-f64f-44eb-9a5e-8d606ac1fc38
description: 'Resumen: revise los escenarios de las opciones de implementación de Skype Empresarial Server. Tanto si desea un único servidor como si prefiere un grupo de servidores con DNS o HLB, este tema debe ser de ayuda.'
ms.openlocfilehash: 5a41baac30f3bf6a1e20ae34db009dae0cec40af
ms.sourcegitcommit: c528fad9db719f3fa96dc3fa99332a349cd9d317
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/12/2021
ms.locfileid: "49825330"
---
# <a name="advanced-edge-server-dns-planning-for-skype-for-business-server"></a><span data-ttu-id="16f9b-104">Planeación avanzada de DNS del servidor perimetral para Skype Empresarial Server</span><span class="sxs-lookup"><span data-stu-id="16f9b-104">Advanced Edge Server DNS planning for Skype for Business Server</span></span>
 
<span data-ttu-id="16f9b-105">**Resumen:** Revise los escenarios de las opciones de implementación de Skype Empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="16f9b-105">**Summary:** Review scenarios for Skype for Business Server deployment options.</span></span> <span data-ttu-id="16f9b-106">Tanto si desea un único servidor como si prefiere un grupo de servidores con DNS o HLB, este tema debe ser de ayuda.</span><span class="sxs-lookup"><span data-stu-id="16f9b-106">Whether you want a single server or prefer a server pool with DNS or HLB, this topic should help.</span></span>
  
<span data-ttu-id="16f9b-107">Cuando se trata de la planeación del Sistema de nombres de dominio (DNS) para Skype Empresarial Server, hay una gran cantidad de factores que pueden afectar a su decisión.</span><span class="sxs-lookup"><span data-stu-id="16f9b-107">When it comes to Domain Name System (DNS) planning for Skype for Business Server, there are a lot of factors that may play into your decision.</span></span> <span data-ttu-id="16f9b-108">Si la estructura de dominio de su organización ya está en su lugar, esto puede ser una cuestión de revisar cómo va a continuar.</span><span class="sxs-lookup"><span data-stu-id="16f9b-108">If your organization's domain structure's already in place, this may be a matter of reviewing how you're going to proceed.</span></span> <span data-ttu-id="16f9b-109">Comenzaremos con los temas que se encuentran a continuación:</span><span class="sxs-lookup"><span data-stu-id="16f9b-109">We'll begin with the topics found below:</span></span>
  
- [<span data-ttu-id="16f9b-110">Tutorial de los servicios de búsqueda de clientes de Skype Empresarial</span><span class="sxs-lookup"><span data-stu-id="16f9b-110">Walkthrough of Skype for Business clients locating services</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#WalkthroughOfSkype)
    
- [<span data-ttu-id="16f9b-111">DNS de cerebro dividido</span><span class="sxs-lookup"><span data-stu-id="16f9b-111">Split-brain DNS</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#SplitBrainDNS)
    
- [<span data-ttu-id="16f9b-112">Configuración automática sin DNS de cerebro dividido</span><span class="sxs-lookup"><span data-stu-id="16f9b-112">Automatic configuration without split-brain DNS</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#NoSplitBrainDNS)
    
- [<span data-ttu-id="16f9b-113">Recuperación ante desastres de DNS</span><span class="sxs-lookup"><span data-stu-id="16f9b-113">DNS disaster recovery</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#DNSDR)
    
- [<span data-ttu-id="16f9b-114">Equilibrio de carga de DNS</span><span class="sxs-lookup"><span data-stu-id="16f9b-114">DNS load balancing</span></span>](../../plan-your-deployment/edge-server-deployments/advanced-edge-server-dns.md#DNSLB)
    
## <a name="walkthrough-of-skype-for-business-clients-locating-services"></a><span data-ttu-id="16f9b-115">Tutorial de los servicios de búsqueda de clientes de Skype Empresarial</span><span class="sxs-lookup"><span data-stu-id="16f9b-115">Walkthrough of Skype for Business clients locating services</span></span>
<span data-ttu-id="16f9b-116"><a name="WalkthroughOfSkype"> </a></span><span class="sxs-lookup"><span data-stu-id="16f9b-116"><a name="WalkthroughOfSkype"> </a></span></span>

<span data-ttu-id="16f9b-117">Los clientes de Skype Empresarial son similares a las versiones anteriores de los clientes de Lync en la forma en que encuentran y acceden a los servicios en Skype Empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="16f9b-117">Skype for Business clients are similar to previous versions of Lync clients in how they find and access services in Skype for Business Server.</span></span> <span data-ttu-id="16f9b-118">En esta sección se detalla el proceso de ubicación del servidor.</span><span class="sxs-lookup"><span data-stu-id="16f9b-118">This section details the server location process.</span></span>
  
1. <span data-ttu-id="16f9b-119">lyncdiscoverinternal.\<domain\></span><span class="sxs-lookup"><span data-stu-id="16f9b-119">lyncdiscoverinternal.\<domain\></span></span>
    
     <span data-ttu-id="16f9b-120">*Se trata de un registro de host A para el servicio Detección automática en los servicios web internos.*</span><span class="sxs-lookup"><span data-stu-id="16f9b-120">*This is an A host record for the Autodiscover service on the internal web services.*</span></span> 
    
2. <span data-ttu-id="16f9b-121">lyncdiscover.\<domain\></span><span class="sxs-lookup"><span data-stu-id="16f9b-121">lyncdiscover.\<domain\></span></span>
    
     <span data-ttu-id="16f9b-122">*Se trata de un registro de host A para el servicio Detección automática en los servicios web externos.*</span><span class="sxs-lookup"><span data-stu-id="16f9b-122">*This is an A host record for the Autodiscover service on the external web services.*</span></span> 
    
3. <span data-ttu-id="16f9b-123">_sipinternaltls._tcp.\<domain\></span><span class="sxs-lookup"><span data-stu-id="16f9b-123">_sipinternaltls._tcp.\<domain\></span></span>
    
     <span data-ttu-id="16f9b-124">*Se trata de un registro SRV para las conexiones TLS internas.*</span><span class="sxs-lookup"><span data-stu-id="16f9b-124">*This is a SRV record for internal TLS connections.*</span></span> 
    
4. <span data-ttu-id="16f9b-125">_sip._tls.\<domain\></span><span class="sxs-lookup"><span data-stu-id="16f9b-125">_sip._tls.\<domain\></span></span>
    
     <span data-ttu-id="16f9b-126">*Se trata de un registro SRV para conexiones TLS externas.*</span><span class="sxs-lookup"><span data-stu-id="16f9b-126">*This is a SRV record for external TLS connections.*</span></span> 
    
5. <span data-ttu-id="16f9b-127">sipinternal.\<domain\></span><span class="sxs-lookup"><span data-stu-id="16f9b-127">sipinternal.\<domain\></span></span>
    
     <span data-ttu-id="16f9b-128">*Se trata de un registro de host A para el grupo de servidores front-end o el director, que solo se puede resolver en la red interna.*</span><span class="sxs-lookup"><span data-stu-id="16f9b-128">*This is an A host record for the Front End pool or Director, resolvable only on the internal network.*</span></span> 
    
6. <span data-ttu-id="16f9b-129">sip.\<domain\></span><span class="sxs-lookup"><span data-stu-id="16f9b-129">sip.\<domain\></span></span>
    
     <span data-ttu-id="16f9b-130">*Se trata de un registro de host A para el grupo de servidores front-end o el director, que solo se puede resolver en la red interna.*</span><span class="sxs-lookup"><span data-stu-id="16f9b-130">*This is an A host record for the Front End pool or Director, resolvable only on the internal network.*</span></span> 
    
7. <span data-ttu-id="16f9b-131">sipexternal.\<domain\></span><span class="sxs-lookup"><span data-stu-id="16f9b-131">sipexternal.\<domain\></span></span>
    
     <span data-ttu-id="16f9b-132">*Se trata de un registro de host A para el servicio perimetral de acceso, cuando el cliente es externo.*</span><span class="sxs-lookup"><span data-stu-id="16f9b-132">*This is an A host record for the Access Edge service, when the client is external.*</span></span> 
    
<span data-ttu-id="16f9b-133">El servicio Detección automática siempre es el preferido, ya que es el método preferido para la ubicación del servicio y los demás son métodos de reserva.</span><span class="sxs-lookup"><span data-stu-id="16f9b-133">The Autodiscover service is always favored as that's the preferred method for service location, and the others are fallback methods.</span></span>
  
> [!NOTE]
> <span data-ttu-id="16f9b-134">Al crear registros SRV, es importante recordar que deben apuntar a un DNS A (y AAAA si usa el direccionamiento IPv6) en el mismo dominio en el que se está creando el registro SRV de DNS.</span><span class="sxs-lookup"><span data-stu-id="16f9b-134">When you're creating SRV records, it's important to remember that they need to point to a DNS A (and AAAA if you're using IPv6 addressing) in the same domain in which the DNS SRV record's being created.</span></span> <span data-ttu-id="16f9b-135">Por ejemplo, si los registros SRV están en contoso.com, el registro A (y AAAA) al que señala no puede estar en fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="16f9b-135">For example, if they SRV record's in contoso.com, the A (and AAAA) record it points to can't be in fabrikam.com.</span></span> 
  
<span data-ttu-id="16f9b-136">Si está dispuesto a hacerlo, puede configurar el dispositivo móvil para la detección manual de servicios.</span><span class="sxs-lookup"><span data-stu-id="16f9b-136">If you're inclined to do it, you can set your mobile device up for manual discovery of services.</span></span> <span data-ttu-id="16f9b-137">Si eso es lo que quiere hacer, cada usuario debe configurar su dispositivo móvil con los URI completos del servicio de detección automática internos y externos, incluidos el protocolo y la ruta de acceso, como se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="16f9b-137">If that's what you're looking to do, each user needs to configure their mobile device settings with the full internal and external Autodiscover service URIs, including the protocol and path, as follows:</span></span>
  
- <span data-ttu-id="16f9b-138">Para el acceso externo: https:// \<ExtPoolFQDN\> /Autodiscover/autodiscoverservice.svc/Root</span><span class="sxs-lookup"><span data-stu-id="16f9b-138">For external access: https://\<ExtPoolFQDN\>/Autodiscover/autodiscoverservice.svc/Root</span></span>
    
- <span data-ttu-id="16f9b-139">Para el acceso interno: https:// \<IntPoolFQDN\> /AutoDiscover/AutoDiscover.svc/Root</span><span class="sxs-lookup"><span data-stu-id="16f9b-139">For internal access: https://\<IntPoolFQDN\>/AutoDiscover/AutoDiscover.svc/Root</span></span>
    
<span data-ttu-id="16f9b-140">Se recomienda usar la detección automática en lugar de la detección manual.</span><span class="sxs-lookup"><span data-stu-id="16f9b-140">We do recommend you use automatic discovery as opposed to manual discovery.</span></span> <span data-ttu-id="16f9b-141">Pero si estás realizando algunas pruebas o solución de problemas, la configuración manual puede ser muy útil.</span><span class="sxs-lookup"><span data-stu-id="16f9b-141">But if you're doing some troubleshooting or testing, manual settings can be very helpful.</span></span>
  
## <a name="split-brain-dns"></a><span data-ttu-id="16f9b-142">DNS de cerebro dividido</span><span class="sxs-lookup"><span data-stu-id="16f9b-142">Split-brain DNS</span></span>
<span data-ttu-id="16f9b-143"><a name="SplitBrainDNS"> </a></span><span class="sxs-lookup"><span data-stu-id="16f9b-143"><a name="SplitBrainDNS"> </a></span></span>

<span data-ttu-id="16f9b-144">Se trata de una configuración DNS en la que tiene dos zonas DNS con el mismo espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="16f9b-144">This is a DNS configuration where you have two DNS zones with the same namespace.</span></span> <span data-ttu-id="16f9b-145">La primera zona DNS controla las solicitudes internas, mientras que la segunda zona DNS controla las solicitudes externas.</span><span class="sxs-lookup"><span data-stu-id="16f9b-145">The first DNS zone handles internal requests, while the second DNS zone handles external requests.</span></span>
  
<span data-ttu-id="16f9b-146">¿Por qué haría esto una empresa?</span><span class="sxs-lookup"><span data-stu-id="16f9b-146">Why would a company do this?</span></span> <span data-ttu-id="16f9b-147">Es posible que tengan un requisito para usar el mismo espacio de nombres interna y externamente, pero, por supuesto, esto hará que muchos registros SRV y A de DNS sean únicos para una zona u otra, y donde haya duplicación, las direcciones IP asociadas a estos registros serían únicas.</span><span class="sxs-lookup"><span data-stu-id="16f9b-147">They may have a requirement to use the same namespace internally and externally, but of course this will lead to many DNS SRV and A records being unique to one zone or another, and where there is duplication, the IP addresses associated with these records would be unique.</span></span>
  
<span data-ttu-id="16f9b-148">Esto presenta algunos desafíos.</span><span class="sxs-lookup"><span data-stu-id="16f9b-148">This presents some challenges.</span></span> <span data-ttu-id="16f9b-149">Lo más importante es que el DNS de cerebro dividido **no es compatible** con la movilidad.</span><span class="sxs-lookup"><span data-stu-id="16f9b-149">The most important is that split-brain DNS is **not supported** for Mobility.</span></span> <span data-ttu-id="16f9b-150">Esto se debe a los registros DNS LyncDiscover y LyncDiscoverInternal (LyncDiscover debe definirse en el servidor DNS externo, mientras que LyncDiscoverInternal debe definirse en el servidor DNS interno).</span><span class="sxs-lookup"><span data-stu-id="16f9b-150">This is because of the LyncDiscover and LyncDiscoverInternal DNS records (LyncDiscover has to be defined on you external DNS server, while LyncDiscoverInternal has to be defined on your internal DNS server).</span></span>
  
<span data-ttu-id="16f9b-151">Aquí enumeraremos los registros DNS para las zonas internas y externas, pero encontrará ejemplos detallados en la sección requisitos del entorno del servidor perimetral.</span><span class="sxs-lookup"><span data-stu-id="16f9b-151">We'll list the DNS records for the internal and external zones here, but you can find detailed examples on the Edge Server environmental requirements section.</span></span>
  
### <a name="internal-dns"></a><span data-ttu-id="16f9b-152">DNS interno</span><span class="sxs-lookup"><span data-stu-id="16f9b-152">Internal DNS</span></span>

- <span data-ttu-id="16f9b-153">Contiene una zona DNS llamada (por ejemplo) contoso.com, para la que es autoritativa.</span><span class="sxs-lookup"><span data-stu-id="16f9b-153">Contains a DNS zone called (for example) contoso.com, for which it's authoritative.</span></span>
    
- <span data-ttu-id="16f9b-154">Esta lista contoso.com contiene:</span><span class="sxs-lookup"><span data-stu-id="16f9b-154">This internal contoso.com contains:</span></span>
    
  - <span data-ttu-id="16f9b-155">Registros A y AAAA de DNS (si usa direccionamiento IPv6) para el grupo de servidores front-end, el grupo de directores o el nombre del grupo de directores, y todos los servidores internos que ejecutan Skype Empresarial Server en la red de su organización.</span><span class="sxs-lookup"><span data-stu-id="16f9b-155">DNS A and AAAA (if you're using IPv6 addressing) records for your Front End pool, Director pool or Director pool name, and all internal servers running Skype for Business Server in your organization's network.</span></span>
    
  - <span data-ttu-id="16f9b-156">Registros A y AAAA de DNS (si usa direccionamiento IPv6) para la interfaz perimetral interna para cada servidor perimetral de Skype Empresarial Server de la red perimetral.</span><span class="sxs-lookup"><span data-stu-id="16f9b-156">DNS A and AAAA (if you're using IPv6 addressing) records for your Edge internal interface for each Skype for Business Server Edge Server in your perimeter network.</span></span>
    
  - <span data-ttu-id="16f9b-157">Registros A y AAAA de DNS (si usa el direccionamiento IPv6) para la interfaz  interna de cada servidor proxy inverso de la red perimetral (que es opcional para la administración de un proxy inverso).</span><span class="sxs-lookup"><span data-stu-id="16f9b-157">DNS A and AAAA (if you're using IPv6 addressing) records for the internal interface of each reverse proxy server in your perimeter network (which is **optional** for management of a reverse proxy).</span></span>
    
  - <span data-ttu-id="16f9b-158">Registros A y AAAA de DNS (si usa el direccionamiento IPv6) y registros SRV para la configuración automática del cliente interno de Skype Empresarial Server (que es **opcional).**</span><span class="sxs-lookup"><span data-stu-id="16f9b-158">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for internal Skype for Business Server client autoconfiguration (which is **optional** ).</span></span>
    
  - <span data-ttu-id="16f9b-159">Registros A y AAAA de DNS (si usa direccionamiento IPv6) o registros CNAME para la detección automática de servicios web de Skype Empresarial Server (que es **opcional).**</span><span class="sxs-lookup"><span data-stu-id="16f9b-159">DNS A and AAAA (if you're using IPv6 addressing) or CNAME records for automatic discovery of Skype for Business Server Web Services (which is **optional** ).</span></span>
    
- <span data-ttu-id="16f9b-160">Todas las interfaces perimetrales internas de Skype Empresarial Server de la red perimetral usan esta zona DNS interna para resolver consultas en contoso.com.</span><span class="sxs-lookup"><span data-stu-id="16f9b-160">All your Skype for Business Server internal Edge interfaces in your perimeter network use this internal DNS zone for resolving queries to contoso.com.</span></span>
    
- <span data-ttu-id="16f9b-161">Todos los servidores que ejecutan Skype Empresarial Server y los clientes que ejecutan Skype Empresarial Server en la red corporativa apuntan a servidores DNS internos para resolver consultas en contoso.com, o usan el archivo host en cada servidor perimetral y listan los registros A y AAAA (si usa el direccionamiento IPv6) para el servidor del próximo salto (específicamente para la DIRECCIÓN VIP del director o del grupo de directores) , VIP del grupo de servidores front-end o servidor Standard Edition).</span><span class="sxs-lookup"><span data-stu-id="16f9b-161">All servers running Skype for Business Server, and clients running Skype for Business Server in the corporate network, point to internal DNS servers for resolving queries to contoso.com, or they use the Host file on each Edge Server and list A and AAAA (if you're using IPv6 addressing) records for the next hop server (specifically for the Director or Director pool VIP, Front End pool VIP, or Standard Edition server).</span></span>
    
### <a name="external-dns"></a><span data-ttu-id="16f9b-162">DNS externo</span><span class="sxs-lookup"><span data-stu-id="16f9b-162">External DNS</span></span>

- <span data-ttu-id="16f9b-163">Contiene una zona DNS llamada (por ejemplo) contoso.com, para la que es autoritativa.</span><span class="sxs-lookup"><span data-stu-id="16f9b-163">Contains a DNS zone called (for example) contoso.com, for which it's authoritative.</span></span>
    
- <span data-ttu-id="16f9b-164">Esta lista contoso.com contiene:</span><span class="sxs-lookup"><span data-stu-id="16f9b-164">This external contoso.com contains:</span></span>
    
  - <span data-ttu-id="16f9b-165">Registros A y AAAA de DNS (si usa el direccionamiento IPv6) o registros CNAME, para la detección automática de los servicios web de Skype Empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="16f9b-165">DNS A and AAAA (if you're using IPv6 addressing), or CNAME records, for automatic discovery of Skype for Business Server web services.</span></span> <span data-ttu-id="16f9b-166">Esto se usa con movilidad.</span><span class="sxs-lookup"><span data-stu-id="16f9b-166">This is for use with mobility.</span></span>
    
  - <span data-ttu-id="16f9b-167">Registros A y AAAA de DNS (si usa direccionamiento IPv6) y registros SRV para la interfaz perimetral externa de cada servidor perimetral de Skype Empresarial Server o VIP con equilibrio de carga de hardware (HLB) en la red perimetral.</span><span class="sxs-lookup"><span data-stu-id="16f9b-167">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for the Edge external interface of each Skype for Business Server Edge Server or hardware load balanced (HLB) VIP in the perimeter network.</span></span>
    
  - <span data-ttu-id="16f9b-168">Registros A y AAAA de DNS (si usa direccionamiento IPv6) y registros SRV para la interfaz externa del servidor proxy inverso o (VIP para un grupo de servidores proxy inversos) en la red perimetral.</span><span class="sxs-lookup"><span data-stu-id="16f9b-168">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for the external interface of the Reverse proxy server or (VIP for a pool of Reverse proxy servers), in the perimeter network.</span></span>
    
  - <span data-ttu-id="16f9b-169">Registros A y AAAA de DNS (si usa el direccionamiento IPv6) y registros SRV para la configuración automática del cliente de Skype Empresarial Server **(opcional).**</span><span class="sxs-lookup"><span data-stu-id="16f9b-169">DNS A and AAAA (if you're using IPv6 addressing) and SRV records for Skype for Business Server client autoconfiguration ( **optional** ).</span></span>
    
## <a name="automatic-configuration-without-split-brain-dns"></a><span data-ttu-id="16f9b-170">Configuración automática sin DNS de cerebro dividido</span><span class="sxs-lookup"><span data-stu-id="16f9b-170">Automatic configuration without split-brain DNS</span></span>
<span data-ttu-id="16f9b-171"><a name="NoSplitBrainDNS"> </a></span><span class="sxs-lookup"><span data-stu-id="16f9b-171"><a name="NoSplitBrainDNS"> </a></span></span>

<span data-ttu-id="16f9b-172">If you don't use split-brain DNS, internal automatic configuration of clients running Skype for Business won't work unless you're using one of the workarounds we have here.</span><span class="sxs-lookup"><span data-stu-id="16f9b-172">If you don't use split-brain DNS, internal automatic configuration of clients running Skype for Business won't work unless you're using one of the workarounds we have here.</span></span> <span data-ttu-id="16f9b-173">¿Por qué no?</span><span class="sxs-lookup"><span data-stu-id="16f9b-173">Why not?</span></span> <span data-ttu-id="16f9b-174">Como Skype Empresarial Server requiere que el URI del SIP del usuario coincida con el dominio del grupo de servidores front-end designado para la configuración automática.</span><span class="sxs-lookup"><span data-stu-id="16f9b-174">Because Skype for Business Server requires the user's SIP URI to match the domain of the Front End pool designated for automatic configuration.</span></span> <span data-ttu-id="16f9b-175">Esto no ha cambiado con respecto a versiones anteriores de Lync Server.</span><span class="sxs-lookup"><span data-stu-id="16f9b-175">This hasn't changed from earlier versions of Lync Server.</span></span>
  
<span data-ttu-id="16f9b-176">Por lo tanto, si tiene dos dominios SIP en uso, necesitará estos registros SRV de DNS:</span><span class="sxs-lookup"><span data-stu-id="16f9b-176">So, if you have two SIP domains in use, you'd need these DNS SRV records:</span></span>
  
- <span data-ttu-id="16f9b-177">_sipinternaltls._tcp.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="16f9b-177">_sipinternaltls._tcp.contoso.com.</span></span> <span data-ttu-id="16f9b-178">86400 IN SRV 0 0 5061 pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-178">86400 IN SRV 0 0 5061 pool01.contoso.com</span></span>
    
     <span data-ttu-id="16f9b-179">*Si un usuario inicia sesión como bob@contoso.com, este registro funcionaría para la configuración automática, ya que el dominio SIP del usuario coincide con el dominio del grupo de servidores front-end (contoso.com).*</span><span class="sxs-lookup"><span data-stu-id="16f9b-179">*If a user signs in as bob@contoso.com, this record would work for automatic configuration, as the user's SIP domain matches the domain of the Front End pool (contoso.com).*</span></span> 
    
- <span data-ttu-id="16f9b-180">_sipinternaltls._tcp.fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="16f9b-180">_sipinternaltls._tcp.fabrikam.com.</span></span> <span data-ttu-id="16f9b-181">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-181">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span></span>
    
     <span data-ttu-id="16f9b-182">*Si un usuario inicia sesión como alice@fabrikam.com, este registro funcionaría para la configuración automática del segundo dominio, de nuevo porque el dominio SIP coincide con el grupo de servidores front-end de ese dominio.*</span><span class="sxs-lookup"><span data-stu-id="16f9b-182">*If a user signs in as alice@fabrikam.com, this record would work for automatic configuration of the second domain, again because the SIP domain matches the Front End pool for that domain.*</span></span> 
    
<span data-ttu-id="16f9b-183">Para continuar con el ejemplo, esto no funcionaría:</span><span class="sxs-lookup"><span data-stu-id="16f9b-183">To take the example further, this would not work:</span></span>
  
- <span data-ttu-id="16f9b-184">_sipinternaltls._tcp.litwareinc.com.</span><span class="sxs-lookup"><span data-stu-id="16f9b-184">_sipinternaltls._tcp.litwareinc.com.</span></span> <span data-ttu-id="16f9b-185">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-185">86400 IN SRV 0 0 5061 pool01.fabrikam.com</span></span>
    
     <span data-ttu-id="16f9b-186">*Un usuario que inicie sesión como tim@litwareinc.com no funcionará para la configuración automática, porque su dominio SIP (litwareinc.com) no coincide con el dominio del grupo (fabrikam.com).*</span><span class="sxs-lookup"><span data-stu-id="16f9b-186">*A user signing in as tim@litwareinc.com won't work for automatic configuration, because his SIP domain (litwareinc.com) doesn't match the domain in the pool (fabrikam.com).*</span></span> 
    
<span data-ttu-id="16f9b-187">Ahora que ya sabemos todo eso, si necesita un requisito automático para sus clientes de Skype Empresarial sin DNS de cerebro dividido, tiene estas opciones:</span><span class="sxs-lookup"><span data-stu-id="16f9b-187">So now that we know all that, if you need automatic requirement for your Skype for Business clients without split-brain DNS, you have these options:</span></span>
  
- <span data-ttu-id="16f9b-188">**Objetos de directiva de grupo**</span><span class="sxs-lookup"><span data-stu-id="16f9b-188">**Group Policy Objects**</span></span>
    
    <span data-ttu-id="16f9b-189">Puedes usar objetos de directiva de grupo (GPO) para rellenar los valores correctos del servidor.</span><span class="sxs-lookup"><span data-stu-id="16f9b-189">You can use Group Policy Objects (GPOs) to populate the correct server values.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="16f9b-190">Esta opción no habilita la configuración automática, pero automatiza la configuración manual.</span><span class="sxs-lookup"><span data-stu-id="16f9b-190">This option doesn't enable automatic configuration, but it does automate manual configuration.</span></span> <span data-ttu-id="16f9b-191">Si se usa este enfoque, no se requieren los registros SRV asociados con la configuración automática.</span><span class="sxs-lookup"><span data-stu-id="16f9b-191">If this approach is used, the SRV records associated with automatic configuration aren't required.</span></span> 
  
- <span data-ttu-id="16f9b-192">**Zona interna coincidente**</span><span class="sxs-lookup"><span data-stu-id="16f9b-192">**Matching internal zone**</span></span>
    
    <span data-ttu-id="16f9b-193">Deberá crear una zona en el DNS interno que coincida con su zona DNS externa (por ejemplo, contoso.com) y, a continuación, crear registros A (y AAAA) de DNS (y AAAA si usa el direccionamiento IPv6) que correspondan al grupo de Skype Empresarial Server usado para la configuración automática.</span><span class="sxs-lookup"><span data-stu-id="16f9b-193">You'll need to create a zone in your internal DNS that matches your external DNS zone (for example, contoso.com), and then create DNS A (and AAAA if you're using IPv6 addressing) records that correspond to the Skype for Business Server pool used for automatic configuration.</span></span>
    
    <span data-ttu-id="16f9b-194">Por ejemplo, si tiene un usuario en pool01.contoso.net, pero inicia sesión en Skype Empresarial como bob@contoso.com, cree una zona DNS interna denominada contoso.com y dentro de ella debe crear un registro A (y AAAA si se usa el direccionamiento IPv6) de DNS para pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="16f9b-194">For example, if you have a user homed on pool01.contoso.net, but signs into Skype for Business as bob@contoso.com, create an internal DNS zone called contoso.com, and inside it you need to create a DNS A (and AAAA if IPv6 addressing's being used) record for pool01.contoso.com.</span></span>
    
- <span data-ttu-id="16f9b-195">**Zona interna designada**</span><span class="sxs-lookup"><span data-stu-id="16f9b-195">**Pin-point internal zone**</span></span>
    
    <span data-ttu-id="16f9b-196">Si la creación de una zona completa en el DNS interno no es una opción, puede crear zonas de punto de patilla (dedicados) que se correspondan con los registros SRV necesarios para la configuración automática y rellenar dichas zonas con dnscmd.exe.</span><span class="sxs-lookup"><span data-stu-id="16f9b-196">If creating an entire zone in your internal DNS isn't an option for you, you can create pin-point (dedicated) zones that correspond to the SRV records required for automatic configuration, and populate those zones using dnscmd.exe.</span></span> <span data-ttu-id="16f9b-197">Dnscmd.exe es necesario porque la interfaz de usuario de DNS no admitirá la creación de zonas de punto de patilla.</span><span class="sxs-lookup"><span data-stu-id="16f9b-197">Dnscmd.exe is required because the DNS user interface won't support the creation of pin-point zones.</span></span>
    
    <span data-ttu-id="16f9b-198">Por ejemplo, si su dominio SIP es contoso.com y tiene un grupo de servidores front-end denominado pool01 que contiene dos servidores front-end, necesitará las siguientes zonas de punto de patilla y registros A en el DNS interno:</span><span class="sxs-lookup"><span data-stu-id="16f9b-198">For example, if your SIP domain is contoso.com, and you have a Front End pool called pool01 that contains two Front End Servers, you'll need the following pin-point zones and A records in your internal DNS:</span></span>
    
  ```console
  dnscmd . /zoneadd _sipinternaltls._tcp.contoso.com. /dsprimary
  dnscmd . /recordadd _sipinternaltls._tcp.contoso.com. @ SRV 0 0 5061 pool01.contoso.com.
  dnscmd . /zoneadd pool01.contoso.com. /dsprimary
  dnscmd . /recordadd pool01.contoso.com. @ A 192.168.10.90
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  dnscmd . /recordadd pool01.contoso.com. @ A 192.168.10.91 
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  ```

    <span data-ttu-id="16f9b-199">Es posible que tenga un segundo dominio SIP en su entorno.</span><span class="sxs-lookup"><span data-stu-id="16f9b-199">You may have a second SIP domain in your environment.</span></span> <span data-ttu-id="16f9b-200">En ese caso, necesitará las siguientes zonas de punto de patilla y registros A en su DNS interno:</span><span class="sxs-lookup"><span data-stu-id="16f9b-200">In that case, you'll need the following pin-point zones and A records in your internal DNS:</span></span>
    
  ```console
  dnscmd . /zoneadd _sipinternaltls._tcp.fabrikam.com. /dsprimary
  dnscmd . /recordadd _sipinternaltls._tcp.fabrikam.com. @ SRV 0 0 5061 pool01.fabrikam.com.
  dnscmd . /zoneadd pool01.fabrikam.com. /dsprimary
  dnscmd . /recordadd pool01.fabrikam.com. @ A 192.168.10.90
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  dnscmd . /recordadd pool01.fabrikam.com. @ A 192.168.10.91
  dnscmd . /recordadd pool01.contoso.com. @ AAAA <IPv6 address>
  ```

> [!NOTE]
> <span data-ttu-id="16f9b-201">Verá que el FQDN del grupo de servidores front-end aparece dos veces, pero con dos direcciones IP diferentes.</span><span class="sxs-lookup"><span data-stu-id="16f9b-201">You'll see the Front End pool FQDN appears twice, but with two different IP addresses.</span></span> <span data-ttu-id="16f9b-202">Esto se debe a que se usa el equilibrio de carga de DNS.</span><span class="sxs-lookup"><span data-stu-id="16f9b-202">That's because DNS load balancing is used.</span></span> <span data-ttu-id="16f9b-203">Si se usa HLB, solo habría una entrada de grupo de servidores front-end.</span><span class="sxs-lookup"><span data-stu-id="16f9b-203">If HLB is used, there'd only be a single Front End pool entry.</span></span> 
  
> [!NOTE]
> <span data-ttu-id="16f9b-204">Además, los valores de FQDN del grupo de servidores front-end cambian entre los ejemplos contoso.com y fabrikam.com, pero las direcciones IP siguen siendo las mismas.</span><span class="sxs-lookup"><span data-stu-id="16f9b-204">Also, the Front End pool FQDN values change between the contoso.com and fabrikam.com examples, but the IP addresses remain the same.</span></span> <span data-ttu-id="16f9b-205">Esto se debe a que los usuarios que inician sesión desde cualquier dominio SIP usarán el mismo grupo de servidores front-end para la configuración automática.</span><span class="sxs-lookup"><span data-stu-id="16f9b-205">That's because users who're signing in from either SIP domain will be using the same Front End pool for automatic configuration.</span></span> 
  
## <a name="dns-disaster-recovery"></a><span data-ttu-id="16f9b-206">Recuperación ante desastres de DNS</span><span class="sxs-lookup"><span data-stu-id="16f9b-206">DNS disaster recovery</span></span>
<span data-ttu-id="16f9b-207"><a name="DNSDR"> </a></span><span class="sxs-lookup"><span data-stu-id="16f9b-207"><a name="DNSDR"> </a></span></span>

<span data-ttu-id="16f9b-208">Para configurar DNS para redirigir el tráfico web de Skype Empresarial Server a los sitios de recuperación ante desastres y de conmutación por error, debe usar un proveedor de DNS compatible con GeoDNS.</span><span class="sxs-lookup"><span data-stu-id="16f9b-208">To configure DNS to redirect Skype for Business Server web traffic to your disaster recover (DR) and failover sites, you need to use a DNS provider that supports GeoDNS.</span></span> <span data-ttu-id="16f9b-209">Puede configurar los registros DNS para admitir la recuperación ante desastres, de modo que las características que usan servicios web continúen incluso si un grupo de servidores front-end completo no funciona.</span><span class="sxs-lookup"><span data-stu-id="16f9b-209">You can set up your DNS records to support disaster recover, so that features that use web services continue even if one entire Front End pool goes down.</span></span> <span data-ttu-id="16f9b-210">Esta característica de recuperación ante desastres admite las direcciones URL sencillas de detección automática, reunión y acceso telefónico.</span><span class="sxs-lookup"><span data-stu-id="16f9b-210">This DR feature supports the Autodiscover, Meet and Dial-in simple URLs.</span></span>
  
<span data-ttu-id="16f9b-211">Defina y configure registros A (AAAA) de host DNS adicionales si usa IPv6 para la resolución interna y externa de servicios web en su proveedor de GeoDNS.</span><span class="sxs-lookup"><span data-stu-id="16f9b-211">You define and configure additional DNS host A (AAAA if using IPv6) records for internal and external resolution of web services at your GeoDNS provider.</span></span> <span data-ttu-id="16f9b-212">En los siguientes detalles se presupone que los grupos emparejados,  geográficamente dispersos, y que el GeoDNS admitido por su proveedor tiene **DNS** por turnos o está configurado para usar Pool1 como principal y conmuta por error al Grupo2 en caso de pérdida de comunicaciones o error de alimentación.</span><span class="sxs-lookup"><span data-stu-id="16f9b-212">The following details assume paired pools, geographically dispersed, and that the GeoDNS supported by your provider **either** has round-robin DNS **or** is configured to use Pool1 as primary and fails over to Pool2 in the event of any communications loss or power failure.</span></span>
  
<span data-ttu-id="16f9b-213">Todos los registros DNS de esta tabla son ejemplos.</span><span class="sxs-lookup"><span data-stu-id="16f9b-213">All the DNS records in this table are examples.</span></span>
  
|<span data-ttu-id="16f9b-214">**Registro de GeoDNS**</span><span class="sxs-lookup"><span data-stu-id="16f9b-214">**GeoDNS record**</span></span>|<span data-ttu-id="16f9b-215">**Registros de grupo de servidores**</span><span class="sxs-lookup"><span data-stu-id="16f9b-215">**Pool records**</span></span>|<span data-ttu-id="16f9b-216">**Registros CNAME**</span><span class="sxs-lookup"><span data-stu-id="16f9b-216">**CNAME records**</span></span>|<span data-ttu-id="16f9b-217">**Configuración dns (seleccione una opción)**</span><span class="sxs-lookup"><span data-stu-id="16f9b-217">**DNS settings (select one option)**</span></span>|
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="16f9b-218">Meet-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-218">Meet-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-219">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-219">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-220">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-220">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-221">Meet.contoso.com alias a Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-221">Meet.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-222">Meet.contoso.com alias a Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-222">Meet.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-223">Round Robin entre grupos</span><span class="sxs-lookup"><span data-stu-id="16f9b-223">Round Robin between pools</span></span>  <br/> <span data-ttu-id="16f9b-224">**OR**</span><span class="sxs-lookup"><span data-stu-id="16f9b-224">**OR**</span></span> <br/> <span data-ttu-id="16f9b-225">Use primary, connect to secondary if there's a failure</span><span class="sxs-lookup"><span data-stu-id="16f9b-225">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="16f9b-226">Meet-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-226">Meet-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-227">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-227">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-228">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-228">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-229">Meet.contoso.com alias a Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-229">Meet.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-230">Meet.contoso.com alias a Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-230">Meet.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-231">Round Robin entre grupos</span><span class="sxs-lookup"><span data-stu-id="16f9b-231">Round Robin between pools</span></span>  <br/> <span data-ttu-id="16f9b-232">**OR**</span><span class="sxs-lookup"><span data-stu-id="16f9b-232">**OR**</span></span> <br/> <span data-ttu-id="16f9b-233">Use primary, connect to secondary if there's a failure</span><span class="sxs-lookup"><span data-stu-id="16f9b-233">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="16f9b-234">Dialin-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-234">Dialin-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-235">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-235">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-236">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-236">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-237">Dialin.contoso.com alias a Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-237">Dialin.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-238">Dialin.contoso.com alias a Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-238">Dialin.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-239">Round Robin entre grupos</span><span class="sxs-lookup"><span data-stu-id="16f9b-239">Round Robin between pools</span></span>  <br/> <span data-ttu-id="16f9b-240">**OR**</span><span class="sxs-lookup"><span data-stu-id="16f9b-240">**OR**</span></span> <br/> <span data-ttu-id="16f9b-241">Use primary, connect to secondary if there's a failure</span><span class="sxs-lookup"><span data-stu-id="16f9b-241">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="16f9b-242">Dialin-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-242">Dialin-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-243">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-243">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-244">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-244">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-245">Dialin.contoso.com alias a Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-245">Dialin.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-246">Dialin.contoso.com alias a Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-246">Dialin.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-247">Round Robin entre grupos</span><span class="sxs-lookup"><span data-stu-id="16f9b-247">Round Robin between pools</span></span>  <br/> <span data-ttu-id="16f9b-248">**OR**</span><span class="sxs-lookup"><span data-stu-id="16f9b-248">**OR**</span></span> <br/> <span data-ttu-id="16f9b-249">Use primary, connect to secondary if there's a failure</span><span class="sxs-lookup"><span data-stu-id="16f9b-249">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="16f9b-250">Lyncdiscoverint-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-250">Lyncdiscoverint-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-251">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-251">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-252">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-252">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-253">Lyncdiscoverinternal.contoso.com alias a Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-253">Lyncdiscoverinternal.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-254">Lyncdiscoverinternal.contoso.com alias a Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-254">Lyncdiscoverinternal.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-255">Round Robin entre grupos</span><span class="sxs-lookup"><span data-stu-id="16f9b-255">Round Robin between pools</span></span>  <br/> <span data-ttu-id="16f9b-256">**OR**</span><span class="sxs-lookup"><span data-stu-id="16f9b-256">**OR**</span></span> <br/> <span data-ttu-id="16f9b-257">Use primary, connect to secondary if there's a failure</span><span class="sxs-lookup"><span data-stu-id="16f9b-257">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="16f9b-258">Lyncdiscover-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-258">Lyncdiscover-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-259">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-259">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-260">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-260">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-261">Lyncdiscover.contoso.com alias a Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-261">Lyncdiscover.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-262">Lyncdiscover.contoso.com alias a Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-262">Lyncdiscover.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-263">Round Robin entre grupos</span><span class="sxs-lookup"><span data-stu-id="16f9b-263">Round Robin between pools</span></span>  <br/> <span data-ttu-id="16f9b-264">**OR**</span><span class="sxs-lookup"><span data-stu-id="16f9b-264">**OR**</span></span> <br/> <span data-ttu-id="16f9b-265">Use primary, connect to secondary if there's a failure</span><span class="sxs-lookup"><span data-stu-id="16f9b-265">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="16f9b-266">Scheduler-int.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-266">Scheduler-int.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-267">Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-267">Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-268">Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-268">Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-269">Scheduler.contoso.com alias a Pool1InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-269">Scheduler.contoso.com alias to Pool1InternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-270">Scheduler.contoso.com alias a Pool2InternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-270">Scheduler.contoso.com alias to Pool2InternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-271">Round Robin entre grupos</span><span class="sxs-lookup"><span data-stu-id="16f9b-271">Round Robin between pools</span></span>  <br/> <span data-ttu-id="16f9b-272">**OR**</span><span class="sxs-lookup"><span data-stu-id="16f9b-272">**OR**</span></span> <br/> <span data-ttu-id="16f9b-273">Use primary, connect to secondary if there's a failure</span><span class="sxs-lookup"><span data-stu-id="16f9b-273">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
|<span data-ttu-id="16f9b-274">Scheduler-ext.geolb.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-274">Scheduler-ext.geolb.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-275">Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-275">Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-276">Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-276">Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-277">Scheduler.contoso.com alias a Pool1ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-277">Scheduler.contoso.com alias to Pool1ExternalWebFQDN.contoso.com</span></span>  <br/> <span data-ttu-id="16f9b-278">Scheduler.contoso.com alias a Pool2ExternalWebFQDN.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-278">Scheduler.contoso.com alias to Pool2ExternalWebFQDN.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-279">Round Robin entre grupos</span><span class="sxs-lookup"><span data-stu-id="16f9b-279">Round Robin between pools</span></span>  <br/> <span data-ttu-id="16f9b-280">**OR**</span><span class="sxs-lookup"><span data-stu-id="16f9b-280">**OR**</span></span> <br/> <span data-ttu-id="16f9b-281">Use primary, connect to secondary if there's a failure</span><span class="sxs-lookup"><span data-stu-id="16f9b-281">Use primary, connect to secondary if there's a failure</span></span>  <br/> |
   
## <a name="dns-load-balancing"></a><span data-ttu-id="16f9b-282">equilibrio de carga de DNS</span><span class="sxs-lookup"><span data-stu-id="16f9b-282">DNS load balancing</span></span>
<span data-ttu-id="16f9b-283"><a name="DNSLB"> </a></span><span class="sxs-lookup"><span data-stu-id="16f9b-283"><a name="DNSLB"> </a></span></span>

<span data-ttu-id="16f9b-284">El equilibrio de carga de DNS normalmente se implementa en el nivel de aplicación.</span><span class="sxs-lookup"><span data-stu-id="16f9b-284">DNS load balancing is usually implemented at the application level.</span></span> <span data-ttu-id="16f9b-285">La aplicación (por ejemplo, un cliente que ejecuta Skype Empresarial) intenta conectarse a un servidor de un grupo de servidores conectándose a una de las direcciones IP devueltas desde la consulta de registro A y AAAA de DNS (si se usa el direccionamiento IPv6) para el FQDN del grupo de servidores.</span><span class="sxs-lookup"><span data-stu-id="16f9b-285">The application (for example, a client running Skype for Business), tries to connect to a server in a pool by connecting to one of the IP addresses returned from the DNS A and AAAA (if IPv6 addressing is used) record query for the pool FQDN.</span></span>
  
<span data-ttu-id="16f9b-286">Por ejemplo, si hay tres servidores front-end en un grupo denominado pool01.contoso.com, sucedería lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="16f9b-286">For example, if there are three Front End Servers in a pool named pool01.contoso.com, the following would happen:</span></span>
  
- <span data-ttu-id="16f9b-287">Los clientes que ejecutan Skype Empresarial consultan DNS para pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="16f9b-287">Clients running Skype for Business query DNS for pool01.contoso.com.</span></span> <span data-ttu-id="16f9b-288">La consulta devuelve tres direcciones IP y las almacena en caché de la siguiente manera (en algún orden):</span><span class="sxs-lookup"><span data-stu-id="16f9b-288">The query returns three IP addresses and caches them as follows (in some order):</span></span>
    
   |||
   |:-----|:-----|
   |<span data-ttu-id="16f9b-289">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-289">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-290">192.168.10.90</span><span class="sxs-lookup"><span data-stu-id="16f9b-290">192.168.10.90</span></span>  <br/> |
   |<span data-ttu-id="16f9b-291">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-291">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-292">192.168.10.91</span><span class="sxs-lookup"><span data-stu-id="16f9b-292">192.168.10.91</span></span>  <br/> |
   |<span data-ttu-id="16f9b-293">pool01.contoso.com</span><span class="sxs-lookup"><span data-stu-id="16f9b-293">pool01.contoso.com</span></span>  <br/> |<span data-ttu-id="16f9b-294">192.168.10.92</span><span class="sxs-lookup"><span data-stu-id="16f9b-294">192.168.10.92</span></span>  <br/> |
   
- <span data-ttu-id="16f9b-295">El cliente intenta establecer una conexión TCP a una de las direcciones IP.</span><span class="sxs-lookup"><span data-stu-id="16f9b-295">The client tries to establish a TCP connection to one of the IP addresses.</span></span> <span data-ttu-id="16f9b-296">Si se produce un error, probará la siguiente dirección IP que se almacena en caché de esa lista.</span><span class="sxs-lookup"><span data-stu-id="16f9b-296">If that fails, it'll try the next IP address it's cached from that list.</span></span>
    
- <span data-ttu-id="16f9b-297">Si la conexión TCP se realiza correctamente, el cliente negocia TLS para conectarse al registrador principal en pool01.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="16f9b-297">If the TCP connection succeeds, the client negotiates TLS to connect to the primary registrar on pool01.contoso.com.</span></span>
    
- <span data-ttu-id="16f9b-298">Si el cliente intenta todas las entradas almacenadas en caché sin una conexión correcta, el usuario recibe una notificación de que no hay servidores que ejecuten Skype Empresarial Server están disponibles en este momento.</span><span class="sxs-lookup"><span data-stu-id="16f9b-298">If the client tries all cached entries without a successful connection, the user receives a notification that no servers running Skype for Business Server are available at the moment.</span></span>
    
> [!NOTE]
> <span data-ttu-id="16f9b-299">El equilibrio de carga basado en DNS es diferente del round robin (DNS RR), que normalmente hace referencia al equilibrio de carga al depender de DNS para dar un orden diferente de direcciones IP para los servidores de su grupo de servidores.</span><span class="sxs-lookup"><span data-stu-id="16f9b-299">DNS-based load balancing is different from DNS round robin (DNS RR), which typically refers to load balancing by relying on DNS to give a different order of IP addresses for the servers in your pool.</span></span> <span data-ttu-id="16f9b-300">Por lo general, DNS RR habilita la distribución de carga, pero no le permitirá habilitar la conmutación por error.</span><span class="sxs-lookup"><span data-stu-id="16f9b-300">Typically, DNS RR enables load distribution, but it won't allow you to enable failover.</span></span> <span data-ttu-id="16f9b-301">Por ejemplo, si se produce un error en la conexión a la única dirección IP devuelta por la consulta A (o AAAA) de DNS en un escenario IPv6, se producirá un error en la conexión.</span><span class="sxs-lookup"><span data-stu-id="16f9b-301">For example, if the connection to the one IP address returned by your DNS A (or AAAA in an IPv6 scenario) query fails, that connection will fail.</span></span> <span data-ttu-id="16f9b-302">Esto hace que EL RR de DNS sea menos confiable que el equilibrio de carga basado en DNS.</span><span class="sxs-lookup"><span data-stu-id="16f9b-302">That makes DNS RR less reliable than DNS-based load balancing.</span></span> <span data-ttu-id="16f9b-303">Aún puede usar DNS RR junto con el equilibrio de carga basado en DNS si necesita hacerlo.</span><span class="sxs-lookup"><span data-stu-id="16f9b-303">You can still use DNS RR in conjunction with DNS-based load balancing if you need to do that.</span></span> 
  
<span data-ttu-id="16f9b-304">El equilibrio de carga de DNS se usa para:</span><span class="sxs-lookup"><span data-stu-id="16f9b-304">You use DNS load balancing to:</span></span>
  
- <span data-ttu-id="16f9b-305">Equilibra la carga de SIP de servidor a servidor con los servidores perimetrales.</span><span class="sxs-lookup"><span data-stu-id="16f9b-305">Load balance server-to-server SIP to the Edge Servers.</span></span>
    
- <span data-ttu-id="16f9b-306">Equilibrar la carga de las aplicaciones de servicios de aplicaciones de comunicación unificada (UCAS), como la Operador automático de conferencias, el grupo de respuesta y el estacionamiento de llamadas.</span><span class="sxs-lookup"><span data-stu-id="16f9b-306">Load balance Unified Communication Application Services (UCAS) applications, such as Conferencing Auto Attendant, Response Group, and Call Park.</span></span>
    
- <span data-ttu-id="16f9b-307">Evitar nuevas conexiones a aplicaciones UCAS (también conocidas como purga).</span><span class="sxs-lookup"><span data-stu-id="16f9b-307">Prevent new connections to UCAS applications (also known as draining).</span></span>
    
- <span data-ttu-id="16f9b-308">Equilibrar la carga de todo el tráfico de cliente a servidor entre clientes y servidores perimetrales.</span><span class="sxs-lookup"><span data-stu-id="16f9b-308">Load balance all client-to-server traffic between clients and Edge Servers.</span></span>
    
<span data-ttu-id="16f9b-309">No puede usar el equilibrio de carga de DNS para:</span><span class="sxs-lookup"><span data-stu-id="16f9b-309">You can't use DNS load balancing for:</span></span>
  
- <span data-ttu-id="16f9b-310">Tráfico web de cliente a servidor a los servidores front-end o a un director.</span><span class="sxs-lookup"><span data-stu-id="16f9b-310">Client-to-server web traffic to your Front End Servers or a Director.</span></span>
    
<span data-ttu-id="16f9b-311">Para ir un poco más en profundidad sobre cómo se selecciona un registro SRV de DNS cuando una consulta devuelve registros DNS mutiple, el servicio perimetral de acceso siempre selecciona el registro con la prioridad numérica más baja y, si se necesita un separador de empates, el peso numérico más alto.</span><span class="sxs-lookup"><span data-stu-id="16f9b-311">To go a little more in-depth on how a DNS SRV record's selected when mutiple DNS records are returned by a query, the Access Edge service always picks the record with the lowest numeric priority and, if a tie-breaker is needed, the highest numeric weight.</span></span> <span data-ttu-id="16f9b-312">Esto es coherente con la documentación del Grupo de [trabajo de ingeniería de Internet.](https://www.ietf.org/rfc/rfc2782.txt)</span><span class="sxs-lookup"><span data-stu-id="16f9b-312">This is consistent with [Internet Engineering Task Force documentation](https://www.ietf.org/rfc/rfc2782.txt).</span></span>
  
<span data-ttu-id="16f9b-313">Por lo tanto, por ejemplo, si el primer registro SRV de DNS tiene un peso de 20 y una prioridad de 40, y el segundo registro SRV de DNS tiene un peso de 10 y una prioridad de 50, se elegirá el primer registro porque tiene la prioridad más baja de 40.</span><span class="sxs-lookup"><span data-stu-id="16f9b-313">So, for example, if your first DNS SRV record has a weight of 20 and a priority of 40, and your second DNS SRV record has a weight of 10 and a priority of 50, the first record's going to be chosen because it has the lower priority of 40.</span></span> <span data-ttu-id="16f9b-314">La prioridad siempre va primero y ese es el host al que se dirigirá primero un cliente.</span><span class="sxs-lookup"><span data-stu-id="16f9b-314">Priority always goes first, and that's the host that a client will target first.</span></span> <span data-ttu-id="16f9b-315">¿Qué ocurre si hay dos destinos con la misma prioridad?</span><span class="sxs-lookup"><span data-stu-id="16f9b-315">What if there are two targets with the same priority?</span></span> 
  
<span data-ttu-id="16f9b-316">En ese caso, se tiene en cuenta el peso.</span><span class="sxs-lookup"><span data-stu-id="16f9b-316">In that case, weight comes into consideration.</span></span> <span data-ttu-id="16f9b-317">Los pesos más grandes deben tener una probabilidad alta, en esta circunstancia, de ser seleccionados.</span><span class="sxs-lookup"><span data-stu-id="16f9b-317">Larger weights should be given a high probability, in this circumstance, of being selected.</span></span> <span data-ttu-id="16f9b-318">Los administradores de DNS deben usar el peso 0 cuando no hay ninguna selección de servidor que hacer.</span><span class="sxs-lookup"><span data-stu-id="16f9b-318">DNS administrators should use weight 0 when there isn't any server selection to do.</span></span> <span data-ttu-id="16f9b-319">En la presencia de registros que contienen pesos mayores que 0, los registros con peso 0 tienen una probabilidad muy pequeña de traer seleccionados.</span><span class="sxs-lookup"><span data-stu-id="16f9b-319">In the presence of records containing weights greater than 0, records with weight 0 have a very small chance of bring selected.</span></span>
  
<span data-ttu-id="16f9b-320">Por lo tanto, ¿qué sucede si se devuelven varios registros SRV de DNS con la misma prioridad y peso?</span><span class="sxs-lookup"><span data-stu-id="16f9b-320">So, then, what happens if multiple DNS SRV records with equal priority and weight as returned?</span></span> <span data-ttu-id="16f9b-321">En esta situación, el servicio perimetral de acceso elegirá primero el registro SRV que obtuvo del servidor DNS.</span><span class="sxs-lookup"><span data-stu-id="16f9b-321">In this situation the Access Edge service will choose the SRV record that it got from the DNS server first.</span></span>
  

