---
title: Configurar aplicaciones de socio en Skype empresarial Server 2015 y Exchange Server
ms.reviewer: ''
ms.author: v-lanac
author: lanachin
manager: serdars
ms.date: 12/20/2018
audience: ITPro
ms.topic: quickstart
ms.prod: skype-for-business-itpro
localization_priority: Normal
ms.collection: IT_Skype16
ms.assetid: 9c3a3054-6201-433f-b128-4c49d3341370
description: 'Resumen: configurar la autenticación de servidor a servidor para Exchange Server 2016 o Exchange Server 2013 y Skype empresarial Server.'
ms.openlocfilehash: 5a1958db05ea1e4fae37737512368d509b3c62cf
ms.sourcegitcommit: e1c8a62577229daf42f1a7bcfba268a9001bb791
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/07/2019
ms.locfileid: "36245514"
---
# <a name="configure-partner-applications-in-skype-for-business-server-and-exchange-server"></a><span data-ttu-id="b38a0-103">Configurar aplicaciones de socio en Skype empresarial Server y Exchange Server</span><span class="sxs-lookup"><span data-stu-id="b38a0-103">Configure partner applications in Skype for Business Server and Exchange Server</span></span>
 
<span data-ttu-id="b38a0-104">**Resumen:** Configure la autenticación de servidor a servidor para Exchange Server 2016 o Exchange Server 2013 y Skype empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="b38a0-104">**Summary:** Configure server to server authentication for Exchange Server 2016 or Exchange Server 2013 and Skype for Business Server.</span></span>
  
<span data-ttu-id="b38a0-105">En la autenticación de servidor a servidor suelen participar dos servidores que necesitan comunicarse entre sí y un servidor de tokens de seguridad de un tercero.</span><span class="sxs-lookup"><span data-stu-id="b38a0-105">Server-to-server authentication usually requires two servers that need to communicate with one another and a third-party security token server.</span></span> <span data-ttu-id="b38a0-106">Si el servidor A y el servidor B necesitan comunicarse, ambos servidores suelen empezar poniéndose en contacto con un servidor de tokens y obtienen un token de seguridad mutuamente confiable.</span><span class="sxs-lookup"><span data-stu-id="b38a0-106">If Server A and Server B need to communicate, then both of those servers typically start by contacting a token server and obtaining a mutually-trusted security token.</span></span> <span data-ttu-id="b38a0-107">El Servidor A presentará dicho token de seguridad al Servidor B (y viceversa) como forma de garantizar tanto su autenticidad como su confiabilidad.</span><span class="sxs-lookup"><span data-stu-id="b38a0-107">Server A then presents that security token to Server B (and vice-versa) as a way to guarantee its authenticity and trustworthiness.</span></span>
  
<span data-ttu-id="b38a0-108">Ahora bien, eso no es sino una regla general.</span><span class="sxs-lookup"><span data-stu-id="b38a0-108">However, that's a general rule.</span></span> <span data-ttu-id="b38a0-109">Skype empresarial Server, Exchange Server 2016, Exchange Server 2013 y SharePoint Server 2013 no necesitan usar un servidor de tokens de terceros cuando se comunican entre sí; Esto se debe a que estos productos de servidor pueden crear tokens de seguridad que se pueden aceptar entre sí sin necesidad de un servidor de token independiente.</span><span class="sxs-lookup"><span data-stu-id="b38a0-109">Skype for Business Server, Exchange Server 2016, Exchange Server 2013, and SharePoint Server 2013 do not need to use a third-party token server when communicating with one another; that's because these server products can create security tokens that can be accepted by one another without the need for a separate token server.</span></span> <span data-ttu-id="b38a0-110">(Esta característica solo está disponible en Skype empresarial Server, Exchange Server 2016, Exchange Server 2013 y SharePoint Server 2013.</span><span class="sxs-lookup"><span data-stu-id="b38a0-110">(This capability is only available in Skype for Business Server, Exchange Server 2016, Exchange Server 2013, and SharePoint Server 2013.</span></span> <span data-ttu-id="b38a0-111">Si necesita configurar una autenticación de servidor a servidor con otros servidores, incluyendo otros productos de servidor de Microsoft, deberá hacerlo con un servidor de tokens de un tercero).</span><span class="sxs-lookup"><span data-stu-id="b38a0-111">If you need to set up server-to-server authentication with other servers, including other Microsoft server products, then you will need to do so by using a third-party token server.)</span></span>
  
<span data-ttu-id="b38a0-112">Para configurar la autenticación de servidor a servidor entre Skype empresarial Server y Exchange Server, debe hacer dos cosas: 1) debe asignar los certificados adecuados a cada servidor. y 2) debe configurar cada servidor para que sea una aplicación asociada al otro servidor, lo que significa que debe configurar Skype empresarial Server para que sea una aplicación de socio de Exchange Server y debe configurar Exchange Server como una aplicación de socio para Skype. para Business Server.</span><span class="sxs-lookup"><span data-stu-id="b38a0-112">In order to set up server-to-server authentication between Skype for Business Server and Exchange Server you must do two things: 1) you must assign the appropriate certificates to each server; and, 2) you must configure each server to be a partner application of the other server: that means you must configure Skype for Business Server to be a partner application for Exchange Server, and you must configure Exchange Server to be a partner application for Skype for Business Server.</span></span>
  
## <a name="configuring-skype-for-business-server-to-be-a-partner-application-for-exchange-server"></a><span data-ttu-id="b38a0-113">Configurar Skype empresarial Server para que sea una aplicación de socio para Exchange Server</span><span class="sxs-lookup"><span data-stu-id="b38a0-113">Configuring Skype for Business Server to be a Partner Application for Exchange Server</span></span>

<span data-ttu-id="b38a0-114">La forma más sencilla de configurar Skype empresarial Server para que sea una aplicación de socio con Exchange Server 2016 o Exchange Server 2013 es ejecutar el script Configure-EnterprisePartnerApplication. ps1, un script de Windows PowerShell que se incluye con Exchange Server.</span><span class="sxs-lookup"><span data-stu-id="b38a0-114">The easiest way to configure Skype for Business Server to be a partner application with Exchange Server 2016 or Exchange Server 2013 is to run the Configure-EnterprisePartnerApplication.ps1 script, a Windows PowerShell script that ships with Exchange Server.</span></span> <span data-ttu-id="b38a0-115">Para ejecutar este script, debe proporcionar la dirección URL del documento de metadatos de autenticación de Skype empresarial Server. normalmente será el nombre de dominio completo del grupo de servidores de Skype empresarial, seguido del sufijo/Metadata/JSON/1.</span><span class="sxs-lookup"><span data-stu-id="b38a0-115">To run this script, you must provide the URL for the Skype for Business Server authentication metadata document; this will typically be the fully qualified domain name of the Skype for Business Server pool followed by the suffix /metadata/json/1.</span></span> <span data-ttu-id="b38a0-116">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="b38a0-116">For example:</span></span>
  
```
https://atl-cs-001.litwareinc.com/metadata/json/1
```

<span data-ttu-id="b38a0-117">Para configurar Skype empresarial Server como aplicación de socio, abra el shell de administración de Exchange y ejecute un comando similar a este (suponiendo que Exchange se haya instalado en el disco C: y que use la ruta de la carpeta predeterminada):</span><span class="sxs-lookup"><span data-stu-id="b38a0-117">To configure Skype for Business Server as a partner application, open the Exchange Management Shell and run a command similar to this (assuming that Exchange has been installed on drive C: and that it uses the default folder path):</span></span>
  
```
"C:\Program Files\Microsoft\Exchange Server\V15\Scripts\Configure-EnterprisePartnerApplication.ps1 -AuthMetaDataUrl 'https://atl-cs-001.litwareinc.com/metadata/json/1' -ApplicationType Lync"
```

<span data-ttu-id="b38a0-118">Después de configurar la aplicación de socio, se recomienda que detenga y reinicie servicios de Internet Information Server (IIS) en el buzón de Exchange y en los servidores de acceso de cliente.</span><span class="sxs-lookup"><span data-stu-id="b38a0-118">After configuring the partner application it is recommended that you stop and restart Internet Information Services (IIS) on your Exchange mailbox and client access servers.</span></span> <span data-ttu-id="b38a0-119">Puede reiniciar IIS mediante un comando similar a este, que reinicia el servicio en el equipo atl-exchange-001:</span><span class="sxs-lookup"><span data-stu-id="b38a0-119">You can restart IIS by using a command similar to this, which restarts the service on the computer atl-exchange-001:</span></span>
  
```
iisreset atl-exchange-001
```

<span data-ttu-id="b38a0-120">Este comando se puede ejecutar desde el shell de administración de Exchange o desde cualquier otra ventana de comandos con privilegios de administrador.</span><span class="sxs-lookup"><span data-stu-id="b38a0-120">This command can be run from within the Exchange Management Shell or from any other command window run under administrator privileges.</span></span>
  
## <a name="configuring-exchange-server-to-be-a-partner-application-for-skype-for-business-server"></a><span data-ttu-id="b38a0-121">Configurar Exchange Server para que sea una aplicación de socio de Skype empresarial Server</span><span class="sxs-lookup"><span data-stu-id="b38a0-121">Configuring Exchange Server to be a Partner Application for Skype for Business Server</span></span>

<span data-ttu-id="b38a0-122">Una vez que haya configurado Skype empresarial Server para que sea una aplicación de socio para Exchange Server 2016 o Exchange Server 2013, debe configurar Exchange Server para que sea una aplicación de socio de Skype empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="b38a0-122">After you have configured Skype for Business Server to be a partner application for Exchange Server 2016 or Exchange Server 2013, you must then configure Exchange Server to be a partner application for Skype for Business Server.</span></span> <span data-ttu-id="b38a0-123">Esto se puede hacer con el shell de administración de Skype empresarial Server y especificar el documento de metadatos de autenticación para Exchange. normalmente será el URI del servicio Detección automática de Exchange, seguido del sufijo/Metadata/JSON/1.</span><span class="sxs-lookup"><span data-stu-id="b38a0-123">This can be done by using the Skype for Business Server Management Shell and specifying the authentication metadata document for Exchange; this will typically be the URI of the Exchange autodiscover service followed by the suffix /metadata/json/1.</span></span> <span data-ttu-id="b38a0-124">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="b38a0-124">For example:</span></span>
  
```
https://autodiscover.litwareinc.com/autodiscover/metadata/json/1
```

<span data-ttu-id="b38a0-125">En Skype empresarial Server, las aplicaciones de socios se configuran mediante el cmdlet [New-CsPartnerApplication](https://docs.microsoft.com/powershell/module/skype/new-cspartnerapplication?view=skype-ps) .</span><span class="sxs-lookup"><span data-stu-id="b38a0-125">In Skype for Business Server, partner applications are configured by using the [New-CsPartnerApplication](https://docs.microsoft.com/powershell/module/skype/new-cspartnerapplication?view=skype-ps) cmdlet.</span></span> <span data-ttu-id="b38a0-126">Además de especificar el URI de los metadatos, también debe establecer el nivel de confianza de la aplicación en completo; Esto permitirá a Exchange representar tanto a sí mismo como a cualquier usuario autorizado en el territorio.</span><span class="sxs-lookup"><span data-stu-id="b38a0-126">In addition to specifying the metadata URI you should also set the application trust level to Full; this will allow Exchange to represent both itself and any authorized user in the realm.</span></span> <span data-ttu-id="b38a0-127">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="b38a0-127">For example:</span></span>
  
```
New-CsPartnerApplication -Identity Exchange -ApplicationTrustLevel Full -MetadataUrl "https://autodiscover.litwareinc.com/autodiscover/metadata/json/1"
```

<span data-ttu-id="b38a0-128">Como alternativa, puede crear una aplicación de socio copiando y modificando el código de script que se encuentra en la documentación de autenticación de servidor a servidor de Skype empresarial Server.</span><span class="sxs-lookup"><span data-stu-id="b38a0-128">Alternatively, you can create a partner application by copying and modifying the script code found in the Skype for Business Server server-to-server authentication documentation.</span></span> <span data-ttu-id="b38a0-129">Para obtener más información, consulte [administrar la autenticación de servidor a servidor (OAuth) y las aplicaciones de asociados en el artículo de Skype empresarial Server](../../manage/authentication/server-to-server-and-partner-applications.md) .</span><span class="sxs-lookup"><span data-stu-id="b38a0-129">See the [Manage server-to-server authentication (OAuth) and partner applications in Skype for Business Server](../../manage/authentication/server-to-server-and-partner-applications.md) article for more information.</span></span>
  
<span data-ttu-id="b38a0-130">Si ha configurado correctamente aplicaciones de socio para Skype empresarial Server y Exchange Server, también ha configurado correctamente la autenticación de servidor a servidor entre los dos productos.</span><span class="sxs-lookup"><span data-stu-id="b38a0-130">If you have successfully configured partner applications for both Skype for Business Server and Exchange Server, you have also successfully configured server-to-server authentication between the two products.</span></span> <span data-ttu-id="b38a0-131">Skype empresarial Server incluye un cmdlet de Windows PowerShell, [Test-CsExStorageConnectivity](https://docs.microsoft.com/powershell/module/skype/test-csexstorageconnectivity?view=skype-ps) , que le permite comprobar que la autenticación de servidor a servidor se ha configurado correctamente y que el servicio de almacenamiento de Skype empresarial Server puede conectarse al servidor de Exchange.</span><span class="sxs-lookup"><span data-stu-id="b38a0-131">Skype for Business Server includes a Windows PowerShell cmdlet, [Test-CsExStorageConnectivity](https://docs.microsoft.com/powershell/module/skype/test-csexstorageconnectivity?view=skype-ps) which enables you to verify that server-to-server authentication has been correctly configured and that the Skype for Business Server Storage Service can connect to Exchange Server.</span></span> <span data-ttu-id="b38a0-132">El cmdlet realiza esta acción conectándose al buzón de un usuario de Exchange Server, escribiendo un elemento en la carpeta Historial de conversaciones de ese usuario y, a continuación (opcionalmente), eliminando ese elemento.</span><span class="sxs-lookup"><span data-stu-id="b38a0-132">The cmdlet does this by connecting to the mailbox of an Exchange Server user, writing an item into the Conversation History folder for that user, and then (optionally) deleting that item.</span></span>
  
<span data-ttu-id="b38a0-133">Para probar la integración de Skype empresarial Server y Exchange Server, ejecute un comando similar al siguiente en el shell de administración de Skype empresarial Server:</span><span class="sxs-lookup"><span data-stu-id="b38a0-133">To test the integration of Skype for Business Server and Exchange Server, run a command similar to the following from the Skype for Business Server Management Shell:</span></span>
  
```
Test-CsExStorageConnectivity -SipUri "sip:kenmyer@litwareinc.com"
```

<span data-ttu-id="b38a0-134">En el comando anterior, SipUri representa la dirección SIP de un usuario con una cuenta en Exchange Server. el comando fallará en esta no es una cuenta de usuario válida.</span><span class="sxs-lookup"><span data-stu-id="b38a0-134">In the preceding command, the SipUri represents the SIP address of a user with an account on Exchange Server; your command will fail in this is not a valid user account.</span></span>
  
> [!NOTE]
> <span data-ttu-id="b38a0-135">Si recibe una respuesta 401 de este cmdlet, probablemente se deba a que la configuración predeterminada de Exchange no incluye compatibilidad para aceptar tokens de OAuth.</span><span class="sxs-lookup"><span data-stu-id="b38a0-135">If you receive a 401 response from this cmdlet, it is probably because the default configuration for Exchange does not include support for accepting Oauth tokens.</span></span> <span data-ttu-id="b38a0-136">Para obtener más información sobre cómo usar OAuth en Exchange, vea [configurar la autenticación OAuth con SharePoint 2013 y Skype empresarial Server](https://go.microsoft.com/fwlink/p/?LinkId=513103).</span><span class="sxs-lookup"><span data-stu-id="b38a0-136">For more information about using Oauth in Exchange, see [Configure OAuth authentication with SharePoint 2013 and Skype for Business Server](https://go.microsoft.com/fwlink/p/?LinkId=513103).</span></span> 
  
<span data-ttu-id="b38a0-137">Si la prueba se completa correctamente y se establece la conectividad, podrá seguir adelante y configurar las características opcionales, como la integración de archivado y el almacén de contactos unificado.</span><span class="sxs-lookup"><span data-stu-id="b38a0-137">If the test succeeds and connectivity has been established, you can then proceed to configure optional features such as archiving integration and the unified contact store.</span></span>
