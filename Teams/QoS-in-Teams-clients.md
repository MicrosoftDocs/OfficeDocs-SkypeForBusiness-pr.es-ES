---
title: Implementar Calidad de servicio en clientes de Microsoft Teams
author: jambirk
ms.author: jambirk
manager: Serdars
ms.date: 2/17/2019
ms.topic: article
ms.service: msteams
ms.reviewer: rowille
description: Implementar la calidad de servicio (QoS) para los clientes de Microsoft Teams.
localization_priority: Normal
search.appverid: MET150
MS.collection:
- Teams_ITAdmin_PracticalGuidance
- M365-voice
appliesto:
- Microsoft Teams
ms.openlocfilehash: 101deb10cf3d86dbc97116cad269556683d03be4
ms.sourcegitcommit: 946c77b847c1b2c5c43802ecfb0a918fa4f562d9
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/15/2019
ms.locfileid: "31869849"
---
# <a name="set-qos-on-windows-clients"></a><span data-ttu-id="d5e40-103">Configurar QoS en clientes de Windows</span><span class="sxs-lookup"><span data-stu-id="d5e40-103">Set QoS on Windows clients</span></span>

<span data-ttu-id="d5e40-104">Puede usar QoS basada en Directiva dentro de la directiva de grupo para establecer el intervalo de puertos de origen para el valor de DSCP predefinido en el cliente de los equipos.</span><span class="sxs-lookup"><span data-stu-id="d5e40-104">You can use policy-based QoS within Group Policy to set the source port range for the predefined DSCP value in the Teams client.</span></span> <span data-ttu-id="d5e40-105">Los intervalos de puertos especificados en la tabla siguiente son un punto de partida para crear una directiva para cada carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="d5e40-105">The port ranges specified in the following table are a starting point to create a policy for each workload.</span></span>

<span data-ttu-id="d5e40-106">_Se recomienda intervalos de puertos inicial_</span><span class="sxs-lookup"><span data-stu-id="d5e40-106">_Recommended initial port ranges_</span></span>

<span data-ttu-id="d5e40-107">Tipo de tráfico de medios</span><span class="sxs-lookup"><span data-stu-id="d5e40-107">Media traffic type</span></span>| <span data-ttu-id="d5e40-108">Intervalo de puertos de origen de cliente</span><span class="sxs-lookup"><span data-stu-id="d5e40-108">Client source port range</span></span> |<span data-ttu-id="d5e40-109">Protocolo</span><span class="sxs-lookup"><span data-stu-id="d5e40-109">Protocol</span></span>|<span data-ttu-id="d5e40-110">Valor de DSCP</span><span class="sxs-lookup"><span data-stu-id="d5e40-110">DSCP value</span></span>|<span data-ttu-id="d5e40-111">Clase de DSCP</span><span class="sxs-lookup"><span data-stu-id="d5e40-111">DSCP class</span></span>|
|:--- |:--- |:--- |:--- |:--- |
|<span data-ttu-id="d5e40-112">Audio</span><span class="sxs-lookup"><span data-stu-id="d5e40-112">Audio</span></span>| <span data-ttu-id="d5e40-113">50.000 – 50,019</span><span class="sxs-lookup"><span data-stu-id="d5e40-113">50,000–50,019</span></span>|<span data-ttu-id="d5e40-114">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="d5e40-114">TCP/UDP</span></span>|<span data-ttu-id="d5e40-115">46</span><span class="sxs-lookup"><span data-stu-id="d5e40-115">46</span></span>|<span data-ttu-id="d5e40-116">Desvío rápido (EF)</span><span class="sxs-lookup"><span data-stu-id="d5e40-116">Expedited Forwarding (EF)</span></span>|
|<span data-ttu-id="d5e40-117">Vídeo</span><span class="sxs-lookup"><span data-stu-id="d5e40-117">Video</span></span>| <span data-ttu-id="d5e40-118">50,020 – 50,039</span><span class="sxs-lookup"><span data-stu-id="d5e40-118">50,020–50,039</span></span>|<span data-ttu-id="d5e40-119">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="d5e40-119">TCP/UDP</span></span>|<span data-ttu-id="d5e40-120">34</span><span class="sxs-lookup"><span data-stu-id="d5e40-120">34</span></span>|<span data-ttu-id="d5e40-121">Desvío garantizado (AF41)</span><span class="sxs-lookup"><span data-stu-id="d5e40-121">Assured Forwarding (AF41)</span></span>|
|<span data-ttu-id="d5e40-122">Uso compartido de aplicaciones o pantalla</span><span class="sxs-lookup"><span data-stu-id="d5e40-122">Application/Screen Sharing</span></span>| <span data-ttu-id="d5e40-123">50,040 – 50,059</span><span class="sxs-lookup"><span data-stu-id="d5e40-123">50,040–50,059</span></span>|<span data-ttu-id="d5e40-124">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="d5e40-124">TCP/UDP</span></span>|<span data-ttu-id="d5e40-125">18</span><span class="sxs-lookup"><span data-stu-id="d5e40-125">18</span></span>|<span data-ttu-id="d5e40-126">Reenvío (AF21) asegurado</span><span class="sxs-lookup"><span data-stu-id="d5e40-126">Assured Forwarding (AF21)</span></span>|
| | | | |

<span data-ttu-id="d5e40-127">Siempre que sea posible, configure las opciones de QoS basada en Directiva dentro de un objeto de directiva de grupo.</span><span class="sxs-lookup"><span data-stu-id="d5e40-127">Wherever possible, configure policy-based QoS settings within a Group Policy object.</span></span> <span data-ttu-id="d5e40-128">Los siguientes pasos son muy similares a la [configuración de intervalos de puertos y una directiva de calidad de servicio para los clientes en Skype para Business Server](https://docs.microsoft.com/SkypeForBusiness/manage/network-management/qos/configuring-port-ranges-for-your-skype-clients#configure-quality-of-service-policies-for-clients-running-on-windows-10), que tiene algunos detalles adicionales que no sea necesarios.</span><span class="sxs-lookup"><span data-stu-id="d5e40-128">The following steps are very similar to  [Configuring port ranges and a Quality of Service policy for your clients on Skype for Business Server](https://docs.microsoft.com/SkypeForBusiness/manage/network-management/qos/configuring-port-ranges-for-your-skype-clients#configure-quality-of-service-policies-for-clients-running-on-windows-10), which has some additional details that may not be necessary.</span></span>

<span data-ttu-id="d5e40-129">Para crear una directiva de audio de QoS para equipos de 10 Windows unido a un dominio, primero inicie sesión en un equipo en el que se ha instalado Administración de directivas de grupo.</span><span class="sxs-lookup"><span data-stu-id="d5e40-129">To create a QoS audio policy for domain-joined Windows 10 computers, first log on to a computer on which Group Policy Management has been installed.</span></span> <span data-ttu-id="d5e40-130">Abra Administración de directivas de grupo (haga clic en Inicio, elija Herramientas administrativas y, a continuación, haga clic en administración de directivas de grupo) y, a continuación, complete los siguientes pasos:</span><span class="sxs-lookup"><span data-stu-id="d5e40-130">Open Group Policy Management (click Start, point to Administrative Tools, and then click Group Policy Management), and then complete the following steps:</span></span>

1. <span data-ttu-id="d5e40-131">En administración de directivas de grupo, busque el contenedor donde se debe crear la nueva directiva.</span><span class="sxs-lookup"><span data-stu-id="d5e40-131">In Group Policy Management, locate the container where the new policy should be created.</span></span> <span data-ttu-id="d5e40-132">Por ejemplo, si todos los equipos cliente se encuentran en una unidad organizativa denominada **clientes**, se debe crear la nueva directiva en la unidad organizativa de cliente.</span><span class="sxs-lookup"><span data-stu-id="d5e40-132">For example, if all your client computers are located in an OU named **Clients**, the new policy should be created in the Client OU.</span></span>

2. <span data-ttu-id="d5e40-133">Haga clic en el contenedor adecuado y, a continuación, haga clic en **crear un GPO en este dominio y vincularlo aquí**.</span><span class="sxs-lookup"><span data-stu-id="d5e40-133">Right-click the appropriate container, and then click **Create a GPO in this domain, and Link it here**.</span></span>

3. <span data-ttu-id="d5e40-134">En el cuadro de diálogo **Nuevo GPO** , escriba un nombre para el nuevo objeto de directiva de grupo en el cuadro **nombre** y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="d5e40-134">In the **New GPO** dialog box, type a name for the new Group Policy object in the **Name** box, and then click **OK**.</span></span>

4. <span data-ttu-id="d5e40-135">Haga clic en la directiva recién creada y, a continuación, haga clic en **Editar**.</span><span class="sxs-lookup"><span data-stu-id="d5e40-135">Right-click the newly created policy, and then click **Edit**.</span></span>

5. <span data-ttu-id="d5e40-136">En el Editor de administración de directiva de grupo, expanda **Configuración del equipo**, expanda **Configuración de Windows**, haga clic en **QoS basada en directiva**y, a continuación, haga clic en **Crear nueva directiva**.</span><span class="sxs-lookup"><span data-stu-id="d5e40-136">In the Group Policy Management Editor, expand **Computer Configuration**, expand **Windows Settings**, right-click **Policy-based QoS**, and then click **Create new policy**.</span></span>

6. <span data-ttu-id="d5e40-137">En el cuadro de diálogo de **QoS basada en directiva** , en la página de apertura, escriba un nombre para la nueva directiva en el cuadro **nombre** .</span><span class="sxs-lookup"><span data-stu-id="d5e40-137">In the **Policy-based QoS** dialog box, on the opening page, type a name for the new policy in the **Name** box.</span></span> <span data-ttu-id="d5e40-138">Seleccione **Especificar el valor de DSCP** y establezca el valor **46**.</span><span class="sxs-lookup"><span data-stu-id="d5e40-138">Select **Specify DSCP Value** and set the value to **46**.</span></span> <span data-ttu-id="d5e40-139">Deje **Especificar velocidad de aceleración saliente** no está seleccionada y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="d5e40-139">Leave **Specify Outbound Throttle Rate** unselected, and then click **Next**.</span></span>

7. <span data-ttu-id="d5e40-140">En la página siguiente, seleccione **sólo las aplicaciones con este nombre del archivo ejecutable** y escriba el nombre **Teams.exe**y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="d5e40-140">On the next page, select **Only applications with this executable name** and enter the name **Teams.exe**, and then click **Next**.</span></span> <span data-ttu-id="d5e40-141">Esta opción indica a la directiva de solo dar prioridad al tráfico coincidente desde el cliente de los equipos.</span><span class="sxs-lookup"><span data-stu-id="d5e40-141">This setting instructs the policy to only prioritize matching traffic from the Teams client.</span></span>

8. <span data-ttu-id="d5e40-142">En la tercera página, asegúrese de que **cualquier dirección IP de origen** y **cualquier dirección IP de destino** están seleccionados y, a continuación, haga clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="d5e40-142">On the third page, make sure that both **Any source IP address** and **Any destination IP address** are selected, and then click **Next**.</span></span> <span data-ttu-id="d5e40-143">Estos dos valores Asegúrese de que se administrarán los paquetes independientemente de qué equipo (dirección IP) envía los paquetes y qué equipo (dirección IP) recibirán los paquetes.</span><span class="sxs-lookup"><span data-stu-id="d5e40-143">These two settings ensure that packets will be managed regardless of which computer (IP address) sent the packets and which computer (IP address) will receive the packets.</span></span>

9. <span data-ttu-id="d5e40-144">En la cuarta página, seleccione **TCP y UDP** en la lista desplegable **Seleccione el protocolo que se aplica esta directiva de QoS** .</span><span class="sxs-lookup"><span data-stu-id="d5e40-144">On page four, select **TCP and UDP** from the **Select the protocol this QoS policy applies to** drop-down list.</span></span> <span data-ttu-id="d5e40-145">TCP (Protocolo de Control de transmisión) y UDP (Protocolo de datagramas de usuario) son los dos protocolos de red usados con más frecuencia.</span><span class="sxs-lookup"><span data-stu-id="d5e40-145">TCP (Transmission Control Protocol) and UDP (User Datagram Protocol) are the two networking protocols most commonly used.</span></span>

10. <span data-ttu-id="d5e40-146">Bajo el encabezado, **Especifique el número de puerto de origen**, seleccione **desde este intervalo o el puerto de origen**.</span><span class="sxs-lookup"><span data-stu-id="d5e40-146">Under the heading **Specify the source port number**, select **From this source port or range**.</span></span> <span data-ttu-id="d5e40-147">En el cuadro de texto que lo acompaña, escriba el intervalo de puertos reservado para las transmisiones de audioconferencias.</span><span class="sxs-lookup"><span data-stu-id="d5e40-147">In the accompanying text box, type the port range reserved for audio transmissions.</span></span> <span data-ttu-id="d5e40-148">Por ejemplo, si ha reservado puertos 50000 a través de puertos 50019 para el tráfico de audio, escriba el intervalo de puertos con este formato: **50000:50019**.</span><span class="sxs-lookup"><span data-stu-id="d5e40-148">For example, if you reserved ports 50000 through ports 50019 for audio traffic, enter the port range using this format: **50000:50019**.</span></span> <span data-ttu-id="d5e40-149">Haga clic en **Finalizar**.</span><span class="sxs-lookup"><span data-stu-id="d5e40-149">Click **Finish**.</span></span>

11. <span data-ttu-id="d5e40-150">Repita los pasos del 5 al 10 para crear directivas para vídeo y uso compartido de aplicaciones y escritorio, sustituyendo los valores apropiados en los pasos 6 y 10.</span><span class="sxs-lookup"><span data-stu-id="d5e40-150">Repeat steps 5-10 to create policies for Video and Application/Desktop Sharing, substituting the appropriate values in steps 6 and 10.</span></span>

<span data-ttu-id="d5e40-151">Las nuevas directivas que se ha creado no surtirán efecto hasta que se ha actualizado la directiva de grupo en los equipos cliente.</span><span class="sxs-lookup"><span data-stu-id="d5e40-151">The new policies you’ve created won’t take effect until Group Policy has been refreshed on your client computers.</span></span> <span data-ttu-id="d5e40-152">Aunque la directiva de grupo se actualiza periódicamente en su propio, puede forzar una actualización inmediata, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="d5e40-152">Although Group Policy periodically refreshes on its own, you can force an immediate refresh by following these steps:</span></span>

1. <span data-ttu-id="d5e40-153">En cada equipo para el que desea actualizar la directiva de grupo, abra una consola de comandos.</span><span class="sxs-lookup"><span data-stu-id="d5e40-153">On each computer for which you want to refresh Group Policy, open a command console.</span></span> <span data-ttu-id="d5e40-154">Asegúrese de que la consola de comandos está establecida en Ejecutar como administrador.</span><span class="sxs-lookup"><span data-stu-id="d5e40-154">Ensure that the command console is set to run as administrator.</span></span>

2. <span data-ttu-id="d5e40-155">En el símbolo del sistema, escriba</span><span class="sxs-lookup"><span data-stu-id="d5e40-155">At the command prompt, enter</span></span>

   ``` powershell
    gpupdate.exe /force
   ```

## <a name="verify-dscp-markings-in-the-group-policy-object"></a><span data-ttu-id="d5e40-156">Compruebe los marcados de DSCP en el objeto de directiva de grupo</span><span class="sxs-lookup"><span data-stu-id="d5e40-156">Verify DSCP markings in the Group Policy object</span></span>

<span data-ttu-id="d5e40-157">Para comprobar que se han establecido los valores desde el objeto de directiva de grupo, realice los pasos siguientes.</span><span class="sxs-lookup"><span data-stu-id="d5e40-157">To verify that the values from the Group Policy object have been set, perform the following steps.</span></span>

1. <span data-ttu-id="d5e40-158">Abra una consola de comandos.</span><span class="sxs-lookup"><span data-stu-id="d5e40-158">Open a command console.</span></span> <span data-ttu-id="d5e40-159">Asegúrese de que la consola de comandos está establecida en Ejecutar como administrador.</span><span class="sxs-lookup"><span data-stu-id="d5e40-159">Ensure that the command console is set to run as administrator.</span></span>

2. <span data-ttu-id="d5e40-160">En el símbolo del sistema, escriba:</span><span class="sxs-lookup"><span data-stu-id="d5e40-160">At the command prompt, enter:</span></span>

   ``` powershell
   gpresult /R > gp.txt
   ```

   <span data-ttu-id="d5e40-161">Esto generará un informe y enviarlo a un archivo de texto denominado gp.txt.</span><span class="sxs-lookup"><span data-stu-id="d5e40-161">This will generate a report and send it to a text file named gp.txt.</span></span> <span data-ttu-id="d5e40-162">Como alternativa, puede escribir el comando siguiente para generar los mismos datos en un informe HTML más legible llamado gp.html:</span><span class="sxs-lookup"><span data-stu-id="d5e40-162">Alternatively, you can enter the following command to produce the same data in a more readable HTML report named gp.html:</span></span>

   ``` powershell
   gpresult /H >gp.html
   ```

   <span data-ttu-id="d5e40-163">![Captura de pantalla de la ventana de la consola que se ejecuta el comando gpresult.] (media/Qos-in-Teams-Image3.png "Captura de pantalla de la ventana de la consola que se ejecuta el comando gpresult.")</span><span class="sxs-lookup"><span data-stu-id="d5e40-163">![Screenshot of the console window running the gpresult command.](media/Qos-in-Teams-Image3.png "Screenshot of the console window running the gpresult command.")</span></span>

3. <span data-ttu-id="d5e40-164">En el archivo generado, busque el encabezado **Aplica objetos de directiva de grupo** y compruebe que los nombres de los objetos de directiva de grupo que creó anteriormente están en la lista de directivas aplicadas.</span><span class="sxs-lookup"><span data-stu-id="d5e40-164">In the generated file, look for the heading **Applied Group Policy Objects** and verify that the names of the Group Policy objects created earlier are in the list of applied policies.</span></span>

4. <span data-ttu-id="d5e40-165">Abra el Editor del registro y vaya a:</span><span class="sxs-lookup"><span data-stu-id="d5e40-165">Open the Registry Editor, and go to:</span></span>

   <span data-ttu-id="d5e40-166">HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\QoS\\</span><span class="sxs-lookup"><span data-stu-id="d5e40-166">HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\QoS\\</span></span>

   <span data-ttu-id="d5e40-167">Compruebe los valores de las entradas del registro que aparecen en la tabla 4.</span><span class="sxs-lookup"><span data-stu-id="d5e40-167">Verify the values for the registry entries listed in Table 4.</span></span>

   <span data-ttu-id="d5e40-168">_Tabla 4. Valores de las entradas del registro de Windows para QoS_</span><span class="sxs-lookup"><span data-stu-id="d5e40-168">_Table 4. Values for Windows registry entries for QoS_</span></span>

   |          <span data-ttu-id="d5e40-169">Nombre</span><span class="sxs-lookup"><span data-stu-id="d5e40-169">Name</span></span>          |  <span data-ttu-id="d5e40-170">Tipo</span><span class="sxs-lookup"><span data-stu-id="d5e40-170">Type</span></span>  |    <span data-ttu-id="d5e40-171">Datos</span><span class="sxs-lookup"><span data-stu-id="d5e40-171">Data</span></span>     |
   |         :---:          |:---:   |    :---:    |
   |    <span data-ttu-id="d5e40-172">Nombre de la aplicación</span><span class="sxs-lookup"><span data-stu-id="d5e40-172">Application Name</span></span>    | <span data-ttu-id="d5e40-173">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="d5e40-173">REG_SZ</span></span> |  <span data-ttu-id="d5e40-174">Teams.exe</span><span class="sxs-lookup"><span data-stu-id="d5e40-174">Teams.exe</span></span>  |
   |       <span data-ttu-id="d5e40-175">Valor de DSCP</span><span class="sxs-lookup"><span data-stu-id="d5e40-175">DSCP Value</span></span>       | <span data-ttu-id="d5e40-176">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="d5e40-176">REG_SZ</span></span> |     <span data-ttu-id="d5e40-177">46</span><span class="sxs-lookup"><span data-stu-id="d5e40-177">46</span></span>      |
   |        <span data-ttu-id="d5e40-178">IP local</span><span class="sxs-lookup"><span data-stu-id="d5e40-178">Local IP</span></span>        | <span data-ttu-id="d5e40-179">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="d5e40-179">REG_SZ</span></span> |     \*      |
   | <span data-ttu-id="d5e40-180">Longitud del prefijo de IP local</span><span class="sxs-lookup"><span data-stu-id="d5e40-180">Local IP Prefix Length</span></span> | <span data-ttu-id="d5e40-181">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="d5e40-181">REG_SZ</span></span> |     \*      |
   |       <span data-ttu-id="d5e40-182">Puerto local</span><span class="sxs-lookup"><span data-stu-id="d5e40-182">Local Port</span></span>       | <span data-ttu-id="d5e40-183">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="d5e40-183">REG_SZ</span></span> | <span data-ttu-id="d5e40-184">50000-50019</span><span class="sxs-lookup"><span data-stu-id="d5e40-184">50000-50019</span></span> |
   |        <span data-ttu-id="d5e40-185">Protocolo</span><span class="sxs-lookup"><span data-stu-id="d5e40-185">Protocol</span></span>        | <span data-ttu-id="d5e40-186">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="d5e40-186">REG_SZ</span></span> |     \*      |
   |       <span data-ttu-id="d5e40-187">IP remota</span><span class="sxs-lookup"><span data-stu-id="d5e40-187">Remote IP</span></span>        | <span data-ttu-id="d5e40-188">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="d5e40-188">REG_SZ</span></span> |     \*      |
   |    <span data-ttu-id="d5e40-189">Prefijo de dirección IP remota</span><span class="sxs-lookup"><span data-stu-id="d5e40-189">Remote IP Prefix</span></span>    | <span data-ttu-id="d5e40-190">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="d5e40-190">REG_SZ</span></span> |     \*      |
   |      <span data-ttu-id="d5e40-191">Puerto remoto</span><span class="sxs-lookup"><span data-stu-id="d5e40-191">Remote Port</span></span>       | <span data-ttu-id="d5e40-192">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="d5e40-192">REG_SZ</span></span> |     \*      |
   |     <span data-ttu-id="d5e40-193">Velocidad de limitación</span><span class="sxs-lookup"><span data-stu-id="d5e40-193">Throttle Rate</span></span>      | <span data-ttu-id="d5e40-194">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="d5e40-194">REG_SZ</span></span> |     <span data-ttu-id="d5e40-195">-1</span><span class="sxs-lookup"><span data-stu-id="d5e40-195">-1</span></span>      |

5. <span data-ttu-id="d5e40-196">Compruebe que es correcto para el cliente que está utilizando el valor de la entrada de nombre de la aplicación y compruebe que el valor de DSCP y el puerto Local entradas reflejan la configuración en el objeto de directiva de grupo.</span><span class="sxs-lookup"><span data-stu-id="d5e40-196">Verify that the value for the Application Name entry is correct for the client you’re using, and verify that both the DSCP Value and Local Port entries reflect the settings in the Group Policy object.</span></span>
